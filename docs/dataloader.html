

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Loader &mdash; cotk  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/cotk_theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Word Vector" href="wordvector.html" />
    <link rel="prev" title="Frequently Asked Questions" href="notes/FAQ.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> cotk
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notes/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes/tutorial_core.html">Practice: Implement a GRU Language Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes/cli_usage.html">CLI Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes/extend.html">Extending Cotk: More Data, More Metrics!</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes/FAQ.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Package Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Loader</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-a-dataloader">Building a Dataloader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#predefined-tasks">Predefined Tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customized-tasks">Customized Tasks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#field">Field</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#read-the-file">Read the File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#process-the-data">Process the Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#provide-the-data-to-networks">Provide the Data to Networks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pretrained-field">Pretrained Field</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tokenizer">Tokenizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vocabulary">Vocabulary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#type-of-tokens">Type of Tokens</a></li>
<li class="toctree-l4"><a class="reference internal" href="#why-cotk-uses-rare-words">Why CoTK Uses Rare Words</a></li>
<li class="toctree-l4"><a class="reference internal" href="#connecting-field-and-vocab">Connecting Field and Vocab</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#context">Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hash-value-for-dataloader">Hash Value for Dataloader</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dataloader">Dataloader</a></li>
<li class="toctree-l2"><a class="reference internal" href="#languageprocessing">LanguageProcessing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tokenizer-vocabulary-and-field">Tokenizer, Vocabulary, and Field</a></li>
<li class="toctree-l3"><a class="reference internal" href="#batched-data">Batched Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sentences-and-manipulations">Sentences and Manipulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Vocabulary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hash">Hash</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#languagegeneration">LanguageGeneration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mscoco">MSCOCO</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#singleturndialog">SingleTurnDialog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#opensubtitles">OpenSubtitles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#multiturndialog">MultiTurnDialog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ubuntucorpus">UbuntuCorpus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#switchboardcorpus">SwitchboardCorpus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sentenceclassification">SentenceClassification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sst">SST</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Field</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sentence">Sentence</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sentencedefault">SentenceDefault</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sentencegpt2">SentenceGPT2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sentencebert">SentenceBERT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#session">Session</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sessiondefault">SessionDefault</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sessiongpt2">SessionGPT2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sessionbert">SessionBERT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#denselabel">DenseLabel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sparselabel">SparseLabel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Tokenizer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#simpletokenizer">SimpleTokenizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pretrainedtokenizer">Pretrainedtokenizer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vocab">Vocab</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generalvocab">GeneralVocab</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pretrainedvocab">PretrainedVocab</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simplevocab">SimpleVocab</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id4">Context</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fieldcontext">FieldContext</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vocabcontext">VocabContext</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wordvector.html">Word Vector</a></li>
<li class="toctree-l1"><a class="reference internal" href="metric.html">Metric</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_utils.html">file_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_utils.html#resources-processor">resources_processor</a></li>
</ul>
<p class="caption"><span class="caption-text">Model Zoo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="models/LanguageGeneration/index.html">LanguageGeneration</a></li>
<li class="toctree-l1"><a class="reference internal" href="models/SingleTurnDialog/index.html">SingleTurnDialog</a></li>
<li class="toctree-l1"><a class="reference internal" href="models/MultiTurnDialog/index.html">MultiTurnDialog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cotk</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Data Loader</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/dataloader.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-cotk.dataloader">
<span id="data-loader"></span><span id="dataloader-reference"></span><h1>Data Loader<a class="headerlink" href="#module-cotk.dataloader" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">cotk.dataloader</span></code> provides classes and functions downloading and
loading benchmark data automatically. It reduces your cost preprocessing
data and provide a fair dataset for every model. It also helps you adapt
your model from one dataset to other datasets.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Dataloaders are essential components in <code class="docutils literal notranslate"><span class="pre">CoTK</span></code> to build models or do fair evaluation.
<code class="docutils literal notranslate"><span class="pre">CoTK</span></code> uses a dataloader class, <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a>, to handle all the tasks about language.
Here we give an overview of what makes a <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a> dataloader.</p>
<img alt="_images/dataloader_structure.png" src="_images/dataloader_structure.png" />
<ul class="simple">
<li><p>A dataloader may have multiple sets of data. In this case,
the name of 3 sets (<code class="docutils literal notranslate"><span class="pre">set_name</span></code>) are <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p></li>
<li><p>Each set stores the data read from a text file. In this example,
3 sets are refered to <code class="docutils literal notranslate"><span class="pre">&quot;train.txt&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev.txt&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test.txt&quot;</span></code>.</p></li>
<li><p>A set may have multiple data fields. In this case,
<code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code> set have two fields, and their name (<code class="docutils literal notranslate"><span class="pre">field_name</span></code>) are <code class="docutils literal notranslate"><span class="pre">&quot;post&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;resp&quot;</span></code>.</p></li>
<li><p>Data fields are specified by <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> instances.
<a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> defines the way that the dataloader reads, process, and output the data.
(But it doesn’t store the data, the data is stored in dataloader.)</p></li>
<li><p>A <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> instance can be shared between data fields.
In the example, <code class="docutils literal notranslate"><span class="pre">&quot;post&quot;</span></code> in <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code> set and <code class="docutils literal notranslate"><span class="pre">&quot;post&quot;</span></code> in <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code> set share an instance.</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> may contains <a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a> and <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a> defines the methods to tokenize a sentence.</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> defines the vocabulary. A instance of <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> can be shared between multiple <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a>, where the data
from multiple <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> will be used to construct the vocabulary.</p></li>
</ul>
<div class="section" id="building-a-dataloader">
<h3>Building a Dataloader<a class="headerlink" href="#building-a-dataloader" title="Permalink to this headline">¶</a></h3>
<div class="section" id="predefined-tasks">
<h4>Predefined Tasks<a class="headerlink" href="#predefined-tasks" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">CoTK</span></code> provides several predefined tasks and benchmarks, including</p>
<dl class="simple">
<dt><a class="reference internal" href="#cotk.dataloader.LanguageGeneration" title="cotk.dataloader.LanguageGeneration"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageGeneration</span></code></a></dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#cotk.dataloader.MSCOCO" title="cotk.dataloader.MSCOCO"><code class="xref py py-class docutils literal notranslate"><span class="pre">MSCOCO</span></code></a></p></li>
</ul>
</dd>
<dt><a class="reference internal" href="#cotk.dataloader.SingleTurnDialog" title="cotk.dataloader.SingleTurnDialog"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingleTurnDialog</span></code></a></dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#cotk.dataloader.OpenSubtitles" title="cotk.dataloader.OpenSubtitles"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpenSubtitles</span></code></a></p></li>
</ul>
</dd>
<dt><a class="reference internal" href="#cotk.dataloader.MultiTurnDialog" title="cotk.dataloader.MultiTurnDialog"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiTurnDialog</span></code></a></dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#cotk.dataloader.UbuntuCorpus" title="cotk.dataloader.UbuntuCorpus"><code class="xref py py-class docutils literal notranslate"><span class="pre">UbuntuCorpus</span></code></a></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">SwitchBoard</span></code></p></li>
</ul>
</dd>
<dt><a class="reference internal" href="#cotk.dataloader.SentenceClassification" title="cotk.dataloader.SentenceClassification"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceClassification</span></code></a></dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#cotk.dataloader.SST" title="cotk.dataloader.SST"><code class="xref py py-class docutils literal notranslate"><span class="pre">SST</span></code></a></p></li>
</ul>
</dd>
</dl>
<p>Choose an adequate class for your task, and it would be the simplest and best way to build a dataloader.
Each class will explain how the dataloader is composed of.</p>
</div>
<div class="section" id="customized-tasks">
<span id="customized-tasks-ref"></span><h4>Customized Tasks<a class="headerlink" href="#customized-tasks" title="Permalink to this headline">¶</a></h4>
<p>If the predefined classes do not satisfy your need, you can construct an instance of <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a>.</p>
<p>To specify the data format of the customized tasks, the initialization of <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a> receives an argument named <code class="docutils literal notranslate"><span class="pre">fields</span></code>.
The full description of <code class="docutils literal notranslate"><span class="pre">fields</span></code> should be like the example below.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">postField</span> <span class="o">=</span> <span class="n">SentenceDefault</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">respField</span> <span class="o">=</span> <span class="n">SentenceDefault</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">labelField</span> <span class="o">=</span> <span class="n">DenseLabel</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s2">&quot;train&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="n">postField</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="n">respField</span><span class="p">)],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s2">&quot;test&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="n">postField</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;resp&#39;</span><span class="p">,</span> <span class="n">respField</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="n">labelField</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataloader</span> <span class="o">=</span> <span class="n">LangaugeProcessing</span><span class="p">(</span><span class="s2">&quot;/path/to/dataset&quot;</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code> is the name of the split sets in the dataset. There should be two text file named <code class="docutils literal notranslate"><span class="pre">train.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">test.txt</span></code>
under <code class="docutils literal notranslate"><span class="pre">/path/to/dataset/</span></code>, corresponding to the two sets, <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code> respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fields[&quot;train&quot;]</span></code> describes the data format of <code class="docutils literal notranslate"><span class="pre">train.txt</span></code>. Every sample in <code class="docutils literal notranslate"><span class="pre">train</span></code> set has two <a class="reference internal" href="#field-ref"><span class="std std-ref">data fields</span></a>,
which is represented by <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> objects.
As <a class="reference internal" href="#cotk.dataloader.SentenceDefault" title="cotk.dataloader.SentenceDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceDefault</span></code></a> (a subclass of <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a>) only read one line per each sample, a sample in <code class="docutils literal notranslate"><span class="pre">train.txt</span></code> occupy two lines.
The first line are named by <code class="docutils literal notranslate"><span class="pre">&quot;post&quot;</span></code>, the second line are named <code class="docutils literal notranslate"><span class="pre">&quot;resp&quot;</span></code>.</p></li>
<li><p>Similarily, <code class="docutils literal notranslate"><span class="pre">fields[&quot;test&quot;]</span></code> describes the data format of <code class="docutils literal notranslate"><span class="pre">test.txt</span></code>. Every sample in <code class="docutils literal notranslate"><span class="pre">test</span></code> set occupies three lines,
where the first line is <code class="docutils literal notranslate"><span class="pre">&quot;post&quot;</span></code>, the second line is <code class="docutils literal notranslate"><span class="pre">&quot;resp&quot;</span></code>, and the third line is an integer indicating <code class="docutils literal notranslate"><span class="pre">&quot;label&quot;</span></code>.</p></li>
</ul>
<p>An valid input example:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/path/to/dataset/train.txt</span></code></p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>How are you?
I am fine.
What&#39;s up?
Everything is good.
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/path/to/dataset/test.txt</span></code></p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>What is your name?
Jack.
1
How about the food?
Terrible.
0
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p>The <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> instances define how dataloaders read the file, process the data, and provide the data to networks.
See <a class="reference internal" href="#field-ref"><span class="std std-ref">fields</span></a> for further details.</p>
<p><strong>Omit Set Names</strong></p>
<p>If you have three sets named <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>, and the data format is the same, you can
specify the <code class="docutils literal notranslate"><span class="pre">fields</span></code> argument in initialization of <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a> by the following code:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fields</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="n">postField</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="n">respField</span><span class="p">)]</span>
</pre></div>
</div>
<p>equals to</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s2">&quot;train&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="n">postField</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="n">respField</span><span class="p">)],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s2">&quot;dev&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="n">postField</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="n">respField</span><span class="p">)],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s2">&quot;test&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="n">postField</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="n">respField</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
</pre></div>
</div>
<p><strong>Use Simple Create</strong></p>
<p>You can use <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.simple_create" title="cotk.dataloader.LanguageProcessing.simple_create"><code class="xref py py-func docutils literal notranslate"><span class="pre">LanguageProcessing.simple_create()</span></code></a> to initialize a dataloder, using the class name of <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a>
instead of instances. The method receives arguments for initializing subclasses of <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> and <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s2">&quot;train&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">)],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s2">&quot;dev&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">)],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s2">&quot;test&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">)],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#or fields = [(&quot;post&quot;, &quot;SentenceDefault&quot;), (&quot;resp&quot;, &quot;SentenceDefault&quot;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataloader</span> <span class="o">=</span> <span class="n">LanguageProcessing</span><span class="o">.</span><span class="n">simple_create</span><span class="p">(</span><span class="s2">&quot;/path/to/dataset&quot;</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> \
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">max_sent_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="s2">&quot;space&quot;</span><span class="p">,</span> <span class="n">min_frequent_vocab_times</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, it will first create an <a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a> instances with <code class="docutils literal notranslate"><span class="pre">min_frequent_vocab_times=10</span></code>.
Then it initialize <a class="reference internal" href="#cotk.dataloader.SentenceDefault" title="cotk.dataloader.SentenceDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceDefault</span></code></a> objects with <code class="docutils literal notranslate"><span class="pre">max_sent_length=10,</span> <span class="pre">tokenizer=&quot;space&quot;</span></code> and the created <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>.</p>
<p id="dataloader-context-ref"><strong>Use Context Manager</strong></p>
<p>There is another way to use the class name of <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> instead of instances. Initialize the <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a>
in the context of <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a> and <a class="reference internal" href="#cotk.dataloader.VocabContext" title="cotk.dataloader.VocabContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">VocabContext</span></code></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fields</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">FieldContext</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">(</span><span class="n">max_sent_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="s2">&quot;space&quot;</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">with</span> <span class="n">VocabContext</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">(</span><span class="n">min_frequent_vocab_times</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">dataloader</span> <span class="o">=</span> <span class="n">LanguageProcessing</span><span class="p">(</span><span class="s2">&quot;/path/to/dataset&quot;</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
</pre></div>
</div>
<p>equals to</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fields</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataloader</span> <span class="o">=</span> <span class="n">LanguageProcessing</span><span class="o">.</span><span class="n">simple_create</span><span class="p">(</span><span class="s2">&quot;/path/to/dataset&quot;</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">max_sent_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">min_frequent_vocab_times</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Context is used to provide default values for <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> and <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instances.
See <a class="reference internal" href="#context-ref"><span class="std std-ref">Context</span></a> for further details.</p>
</div>
</div>
<div class="section" id="field">
<span id="field-ref"></span><h3>Field<a class="headerlink" href="#field" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> indicates data fields, which work secretly behind dataloaders.
They define how dataloaders read the file, process the data, and provide the data to networks.</p>
<p><code class="docutils literal notranslate"><span class="pre">Cotk</span></code> provides several fields, including</p>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a></dt><dd><ul>
<li><p><a class="reference internal" href="#cotk.dataloader.SentenceDefault" title="cotk.dataloader.SentenceDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceDefault</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.SentenceGPT2" title="cotk.dataloader.SentenceGPT2"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceGPT2</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.SentenceBERT" title="cotk.dataloader.SentenceBERT"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceBERT</span></code></a></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="#cotk.dataloader.Session" title="cotk.dataloader.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a></dt><dd><ul>
<li><p><a class="reference internal" href="#cotk.dataloader.SessionDefault" title="cotk.dataloader.SessionDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionDefault</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.SessionGPT2" title="cotk.dataloader.SessionGPT2"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionGPT2</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.SessionBERT" title="cotk.dataloader.SessionBERT"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionBERT</span></code></a></p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference internal" href="#cotk.dataloader.DenseLabel" title="cotk.dataloader.DenseLabel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DenseLabel</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.SparseLabel" title="cotk.dataloader.SparseLabel"><code class="xref py py-class docutils literal notranslate"><span class="pre">SparseLabel</span></code></a></p></li>
</ul>
<p>Note <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> never stores data, because the instance can be shared between different data fields in dataloader.</p>
<div class="section" id="read-the-file">
<h4>Read the File<a class="headerlink" href="#read-the-file" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> defines the way to read the file. For example,</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> reads one line per sample, which is a string of sentence.</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.Session" title="cotk.dataloader.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> reads multiple lines per sample, stopped when a empty line is read.</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.DenseLabel" title="cotk.dataloader.DenseLabel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DenseLabel</span></code></a> reads one line per sample, which is an integer.</p></li>
</ul>
<p>See the documentation in each class for details.</p>
</div>
<div class="section" id="process-the-data">
<h4>Process the Data<a class="headerlink" href="#process-the-data" title="Permalink to this headline">¶</a></h4>
<p>Each subclass of <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> defines the methods to process the input.</p>
<p>For example, <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> processes the sentence into different formats:</p>
<ul class="simple">
<li><p>(str) The whole sentences.</p></li>
<li><p>(List[str]) The tokenized sentences.</p></li>
<li><p>(List[id]) The index of tokens in the <a class="reference internal" href="#vocabulary-ref"><span class="std std-ref">vocabulary</span></a>.</p></li>
</ul>
<p><a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> also provides methods to convert a sentence from one format to another:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cotk.dataloader.Sentence.tokenize" title="cotk.dataloader.Sentence.tokenize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sentence.tokenize()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.Sentence.convert_ids_to_sentence" title="cotk.dataloader.Sentence.convert_ids_to_sentence"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sentence.convert_ids_to_sentence()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.Sentence.convert_sentence_to_ids" title="cotk.dataloader.Sentence.convert_sentence_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sentence.convert_sentence_to_ids()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.Sentence.convert_tokens_to_ids" title="cotk.dataloader.Sentence.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sentence.convert_tokens_to_ids()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.Sentence.convert_ids_to_tokens" title="cotk.dataloader.Sentence.convert_ids_to_tokens"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sentence.convert_ids_to_tokens()</span></code></a></p></li>
</ul>
<p>The dataloader has similar methods, which invoke the corresponding methods of the default field.
See <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.set_default_field" title="cotk.dataloader.LanguageProcessing.set_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.set_default_field()</span></code></a> for details.</p>
</div>
<div class="section" id="provide-the-data-to-networks">
<h4>Provide the Data to Networks<a class="headerlink" href="#provide-the-data-to-networks" title="Permalink to this headline">¶</a></h4>
<p>Each subclass of <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> defines <a class="reference internal" href="#cotk.dataloader.Field.get_batch" title="cotk.dataloader.Field.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Field.get_batch()</span></code></a>,
which returns a dict of data for training the networks.</p>
<p>For example, if an instance of <a class="reference internal" href="#cotk.dataloader.SentenceDefault" title="cotk.dataloader.SentenceDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceDefault</span></code></a> is named with <code class="docutils literal notranslate"><span class="pre">&quot;sent&quot;</span></code>,
<a class="reference internal" href="#cotk.dataloader.SentenceDefault.get_batch" title="cotk.dataloader.SentenceDefault.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SentenceDefault.get_batch()</span></code></a> will return a dict containing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sent</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sent_length</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sent_allvocabs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sent_str</span></code></p></li>
</ul>
<p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a> will collect dict returned from every field and merge them.
For example, if a dataloader with two <a class="reference internal" href="#cotk.dataloader.SentenceDefault" title="cotk.dataloader.SentenceDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceDefault</span></code></a> fields named <code class="docutils literal notranslate"><span class="pre">&quot;post&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;resp&quot;</span></code>,
<a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a> will return a dict containing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">post</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">post_allvocabs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">post_length</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">post_str</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reps</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resp_allvocabs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resp_length</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resp_str</span></code></p></li>
</ul>
</div>
<div class="section" id="pretrained-field">
<span id="pretrained-field-ref"></span><h4>Pretrained Field<a class="headerlink" href="#pretrained-field" title="Permalink to this headline">¶</a></h4>
<p>Default fields like <a class="reference internal" href="#cotk.dataloader.SentenceDefault" title="cotk.dataloader.SentenceDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceDefault</span></code></a> and <a class="reference internal" href="#cotk.dataloader.SessionDefault" title="cotk.dataloader.SessionDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionDefault</span></code></a> are designing
for common use in different language processing task. They use <code class="docutils literal notranslate"><span class="pre">&lt;go&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;eos&gt;</span></code> to mark
the start and the end of sentences.</p>
<p>For some pretrained models like <code class="docutils literal notranslate"><span class="pre">GPT2</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;go&gt;</span></code> are not pretrained in the vocabulary and thus not available.
We design different field for different pretrained models, including:</p>
<ul class="simple">
<li><p>GPT2: <a class="reference internal" href="#cotk.dataloader.SentenceGPT2" title="cotk.dataloader.SentenceGPT2"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceGPT2</span></code></a>, <a class="reference internal" href="#cotk.dataloader.SessionGPT2" title="cotk.dataloader.SessionGPT2"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionGPT2</span></code></a></p></li>
<li><p>BERT: <a class="reference internal" href="#cotk.dataloader.SentenceBERT" title="cotk.dataloader.SentenceBERT"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceBERT</span></code></a>, <a class="reference internal" href="#cotk.dataloader.SessionBERT" title="cotk.dataloader.SessionBERT"><code class="xref py py-class docutils literal notranslate"><span class="pre">SessionBERT</span></code></a></p></li>
</ul>
</div>
</div>
<div class="section" id="tokenizer">
<span id="tokenizer-ref"></span><h3>Tokenizer<a class="headerlink" href="#tokenizer" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a> defines the method to tokenize a sentence, which is used by <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">CoTK</span></code> provides several tokenizers, including</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cotk.dataloader.SimpleTokenizer" title="cotk.dataloader.SimpleTokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleTokenizer</span></code></a>: A simple tokenizer for general use in <code class="docutils literal notranslate"><span class="pre">CoTK</span></code>, supporting <code class="docutils literal notranslate"><span class="pre">space</span></code> or <code class="docutils literal notranslate"><span class="pre">nltk</span></code> tokenization.</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.PretrainedTokenizer" title="cotk.dataloader.PretrainedTokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">PretrainedTokenizer</span></code></a>: A pretrained Tokenizer from the <code class="docutils literal notranslate"><span class="pre">transformers</span></code> package. For example, tokenizer for <code class="docutils literal notranslate"><span class="pre">GPT2</span></code>.</p></li>
</ul>
<p>When creating a dataloader, it often receives <code class="docutils literal notranslate"><span class="pre">str</span></code> or <a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>.
If <code class="docutils literal notranslate"><span class="pre">str</span></code>, the following arguments are acceptable:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">space</span></code>: Split by spaces.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nltk</span></code>: <code class="docutils literal notranslate"><span class="pre">nltk.tokenize.WordPunctTokenizer</span></code> will be used.</p></li>
</ul>
<p>A <a class="reference internal" href="#cotk.dataloader.SimpleTokenizer" title="cotk.dataloader.SimpleTokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleTokenizer</span></code></a> will be created by the <code class="docutils literal notranslate"><span class="pre">str</span></code> arguments.</p>
</div>
<div class="section" id="vocabulary">
<span id="vocabulary-ref"></span><h3>Vocabulary<a class="headerlink" href="#vocabulary" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> defines the vocabulary, which is used by <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">CoTK</span></code> provides several vocabularies, including</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a>: A vocabulary for general use in <code class="docutils literal notranslate"><span class="pre">CoTK</span></code>. The vocabulary list is often built during the processing of input data.
Save and load a predefined vocabulary is also supported.</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.PretrainedVocab" title="cotk.dataloader.PretrainedVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">PretrainedVocab</span></code></a>: A predefeined vocabulary from the <code class="docutils literal notranslate"><span class="pre">transformers</span></code> package. For example, vocabulary for <code class="docutils literal notranslate"><span class="pre">GPT2</span></code>.</p></li>
</ul>
<div class="section" id="type-of-tokens">
<h4>Type of Tokens<a class="headerlink" href="#type-of-tokens" title="Permalink to this headline">¶</a></h4>
<p>All tokens appeared in dataset (including the ones only appear in test set) are split into
2 sets.</p>
<blockquote>
<div><dl class="simple">
<dt>Frequent Vocabularies(<code class="docutils literal notranslate"><span class="pre">frequent_vocabs</span></code>)</dt><dd><ul class="simple">
<li><p>Tokens that the model <strong>should</strong> read, predict and generate.</p></li>
<li><p>These tokens are important in evaluation. They include
common words and usually cover over most of tokens
from dataset.</p></li>
<li><p>They are extracted from only training set, because models should be
blind for test set. Hence they are defined as the tokens appear
more than a specified number of times (<code class="docutils literal notranslate"><span class="pre">min_frequent_vocab_times</span></code>) in
<strong>training set</strong>.</p></li>
</ul>
</dd>
<dt>Rare Vocabularies(<code class="docutils literal notranslate"><span class="pre">rare_vocabs</span></code>)</dt><dd><ul class="simple">
<li><p>Tokens that the model can <strong>optionally</strong> read,
but will <strong>not</strong> predict and generate at most times
(<strong>except</strong> some models can generate rare words using
copy mechanism or external knowledge).</p></li>
<li><p>These tokens are less important but <strong>DO</strong> affect the evaluation.</p></li>
<li><p>They are extracted from both training set and test set, because they
are defined considering evaluation. Hence, they are defined as the tokens
(excluded <code class="docutils literal notranslate"><span class="pre">frequent_vocabs</span></code>) appear more than a specified number
(<code class="docutils literal notranslate"><span class="pre">min_rare_vocab_times</span></code>) of times in <strong>the whole dataset</strong>.</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p>There is also some other terms for vocabularies.</p>
<blockquote>
<div><dl class="simple">
<dt>All Vocabularies(<code class="docutils literal notranslate"><span class="pre">allvocabs</span></code>)</dt><dd><ul class="simple">
<li><p>The union of <cite>Frequent vocabularies</cite> and <cite>rare vocabularies</cite> is called <cite>all vocabularies</cite>.</p></li>
</ul>
</dd>
<dt>Special Tokens(<code class="docutils literal notranslate"><span class="pre">special_tokens</span></code>)</dt><dd><ul class="simple">
<li><p>Most used special tokens are <code class="docutils literal notranslate"><span class="pre">&lt;pad&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;unk&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;go&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;eos&gt;</span></code>.</p></li>
<li><p>Special tokens are counted as valid vocabularies.</p></li>
</ul>
</dd>
<dt>Unknown tokens (<code class="docutils literal notranslate"><span class="pre">&lt;unk&gt;</span></code>)</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;unk&gt;</span></code> means “Out of Vocabularies”, but the meaning of <code class="docutils literal notranslate"><span class="pre">&lt;unk&gt;</span></code> may varies from situations.</p></li>
<li><p>If it appears at a list named with <code class="docutils literal notranslate"><span class="pre">allvocabs</span></code> (eg: <code class="docutils literal notranslate"><span class="pre">sent_allvocabs</span></code>),
<code class="docutils literal notranslate"><span class="pre">&lt;unk&gt;</span></code> indicates a token out of all vocabularies.</p></li>
<li><p>If it appears at a list named without <code class="docutils literal notranslate"><span class="pre">allvocabs</span></code> (eg: <code class="docutils literal notranslate"><span class="pre">sent</span></code>),
<code class="docutils literal notranslate"><span class="pre">&lt;unk&gt;</span></code> indicates a token out of frequent vocabularies, which means it may a <code class="docutils literal notranslate"><span class="pre">rare</span> <span class="pre">vocabulary</span></code>.</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="why-cotk-uses-rare-words">
<h4>Why CoTK Uses Rare Words<a class="headerlink" href="#why-cotk-uses-rare-words" title="Permalink to this headline">¶</a></h4>
<p>In traditional implementations, vocabulary only contains frequent vocabulary.
<code class="docutils literal notranslate"><span class="pre">CoTK</span></code> use frequent vocabulary and rare vocabulary for supporting fair comparisons across different configurations.</p>
<p>For examples, we test two models under the same dataset, but with different vocabularies.</p>
<ul class="simple">
<li><p>Model A:  Frequent vocabulary <code class="docutils literal notranslate"><span class="pre">F_A</span></code>; Rare vocabulary <code class="docutils literal notranslate"><span class="pre">R_A</span></code>.</p></li>
<li><p>Model B:  Frequent vocabulary <code class="docutils literal notranslate"><span class="pre">F_B</span></code>; Rare vocabulary <code class="docutils literal notranslate"><span class="pre">R_B</span></code>.</p></li>
</ul>
<p>The fairness of comparisons can be gauranteed under the conditions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="metric.html#cotk.metric.PerplexityMetric" title="cotk.metric.PerplexityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.PerplexityMetric</span></code></a>: <code class="docutils literal notranslate"><span class="pre">F_A</span> <span class="pre">+</span> <span class="pre">R_A</span> <span class="pre">==</span> <span class="pre">F_B</span> <span class="pre">+</span> <span class="pre">R_B</span></code>.</p></li>
<li><p><a class="reference internal" href="metric.html#cotk.metric.BleuCorpusMetric" title="cotk.metric.BleuCorpusMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.BleuCorpusMetric</span></code></a>: <code class="docutils literal notranslate"><span class="pre">F_A</span> <span class="pre">+</span> <span class="pre">R_A</span> <span class="pre">==</span> <span class="pre">F_B</span> <span class="pre">+</span> <span class="pre">R_B</span></code> if tokenizer is <code class="docutils literal notranslate"><span class="pre">None</span></code>; Always fair if tokenizer is set.</p></li>
</ul>
<p>See each metrics for when the fairness can be gauranteed.
<a class="reference internal" href="metric.html#metric-hashvalue-ref"><span class="std std-ref">Hash value</span></a> can help user determine whether the comparisons is fair.</p>
</div>
<div class="section" id="connecting-field-and-vocab">
<span id="vocab-from-ref"></span><h4>Connecting Field and Vocab<a class="headerlink" href="#connecting-field-and-vocab" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a> is often shared between fields for constructing vocabulary list together.
To identify tokens from a field is regarded as training set or test set
(which may be relative to the division of frequent vocab and rare vocab), <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> use an arguments named <code class="docutils literal notranslate"><span class="pre">vocab_from_mappings</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">vocab_from_mappings</span></code> is a dict, which infer the type of token by the set name. By default:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 62%" />
<col style="width: 38%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Set Name</strong></p></td>
<td><p><strong>Type</strong></p></td>
</tr>
<tr class="row-even"><td><p>train</p></td>
<td><p>train</p></td>
</tr>
<tr class="row-odd"><td><p>training</p></td>
<td><p>train</p></td>
</tr>
<tr class="row-even"><td><p>dev</p></td>
<td><p>test</p></td>
</tr>
<tr class="row-odd"><td><p>development</p></td>
<td><p>test</p></td>
</tr>
<tr class="row-even"><td><p>valid</p></td>
<td><p>test</p></td>
</tr>
<tr class="row-odd"><td><p>validation</p></td>
<td><p>test</p></td>
</tr>
<tr class="row-even"><td><p>test</p></td>
<td><p>test</p></td>
</tr>
<tr class="row-odd"><td><p>evaluation</p></td>
<td><p>test</p></td>
</tr>
</tbody>
</table>
<p>For example, a token from the <code class="docutils literal notranslate"><span class="pre">training</span></code> set will have a type of <code class="docutils literal notranslate"><span class="pre">train</span></code>.
The type will passed to <a class="reference internal" href="#cotk.dataloader.Vocab.add_tokens" title="cotk.dataloader.Vocab.add_tokens"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vocab.add_tokens()</span></code></a> as <code class="docutils literal notranslate"><span class="pre">vocab_from</span></code>.
There are 3 types:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">train</span></code>: Frequent vocabs are selected from tokens of this type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code>: Rare vocabs are selected from tokens of this type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extra</span></code>: The tokens of this type will not selected as frequent or rare vocabs.</p></li>
</ul>
</div>
</div>
<div class="section" id="context">
<span id="context-ref"></span><h3>Context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a> and <a class="reference internal" href="#cotk.dataloader.VocabContext" title="cotk.dataloader.VocabContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">VocabContext</span></code></a> are used to set
the default arguments for subclasses of <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> and <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> respectively.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vocab</span> <span class="o">=</span> <span class="n">GeneralVocab</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">FieldContext</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">(</span><span class="n">vocab</span><span class="o">=</span><span class="n">vocab</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="s2">&quot;space&quot;</span><span class="p">,</span> <span class="n">min_frequent_vocab_times</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">field</span> <span class="o">=</span> <span class="n">SentenceDefault</span><span class="p">()</span>
</pre></div>
</div>
<p>equals to:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vocab</span> <span class="o">=</span> <span class="n">GeneralVocab</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="n">SentenceDefault</span><span class="p">(</span><span class="n">vocab</span><span class="o">=</span><span class="n">vocab</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="s2">&quot;space&quot;</span><span class="p">,</span> <span class="n">min_frequent_vocab_times</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>The context can be stacked, and <code class="docutils literal notranslate"><span class="pre">weak</span></code> means whether overwrite the outter context.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vocab</span> <span class="o">=</span> <span class="n">GeneralVocab</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">FieldContext</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">(</span><span class="n">vocab</span><span class="o">=</span><span class="n">vocab</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="s2">&quot;space&quot;</span><span class="p">,</span> <span class="n">min_frequent_vocab_times</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">with</span> <span class="n">FieldContext</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">(</span><span class="n">min_frequent_vocab_times</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">field1</span> <span class="o">=</span> <span class="n">SentenceDefault</span><span class="p">()</span>  <span class="c1"># min_frequent_vocab_times=20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">FieldContext</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">(</span><span class="n">vocab</span><span class="o">=</span><span class="n">vocab</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="s2">&quot;space&quot;</span><span class="p">,</span> <span class="n">min_frequent_vocab_times</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">with</span> <span class="n">FieldContext</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">(</span><span class="n">min_frequent_vocab_times</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">weak</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">field2</span> <span class="o">=</span> <span class="n">SentenceDefault</span><span class="p">()</span>  <span class="c1"># min_frequent_vocab_times=10</span>
</pre></div>
</div>
<p>It usually works with the initialization of <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a> without creating the instance of <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> or <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>.
See the <a class="reference internal" href="#dataloader-context-ref"><span class="std std-ref">examples</span></a> here.</p>
</div>
<div class="section" id="hash-value-for-dataloader">
<span id="dataloader-hash-ref"></span><h3>Hash Value for Dataloader<a class="headerlink" href="#hash-value-for-dataloader" title="Permalink to this headline">¶</a></h3>
<p>It is usually difficult to track the differences among different configurations,
CoTK provides hash codes to identify each part of dataloader including
the input data, vocabularies and settings.</p>
<p>For example, if two data loaders have the same general hash, their data, vocabularies
and settings are guaranteed to be the same.</p>
<p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a> provides the following hash value:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_raw_data_hash" title="cotk.dataloader.LanguageProcessing.get_raw_data_hash"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_raw_data_hash()</span></code></a>. Tracking the raw input file before processed.</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_data_hash" title="cotk.dataloader.LanguageProcessing.get_data_hash"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_data_hash()</span></code></a>. Tracking the data after processed.</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_vocab_hash" title="cotk.dataloader.LanguageProcessing.get_vocab_hash"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_vocab_hash()</span></code></a>. Tracking the vocabulary before processed.</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_setting_hash" title="cotk.dataloader.LanguageProcessing.get_setting_hash"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_setting_hash()</span></code></a>. Tracking the settings (arguments of the dataloader).</p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_general_hash" title="cotk.dataloader.LanguageProcessing.get_general_hash"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_general_hash()</span></code></a>. Tracking all above.</p></li>
</ul>
</div>
</div>
<div class="section" id="dataloader">
<h2>Dataloader<a class="headerlink" href="#dataloader" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cotk.dataloader.Dataloader">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">Dataloader</code><a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#Dataloader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Dataloader" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class of Dataloader.</p>
<dl class="method">
<dt id="cotk.dataloader.Dataloader.get_all_subclasses">
<em class="property">classmethod </em><code class="sig-name descname">get_all_subclasses</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Iterable[Any]<a class="headerlink" href="#cotk.dataloader.Dataloader.get_all_subclasses" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator of all subclasses.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Dataloader.load_class">
<em class="property">classmethod </em><code class="sig-name descname">load_class</code><span class="sig-paren">(</span><em class="sig-param">class_name</em><span class="sig-paren">)</span> &#x2192; Any<a class="headerlink" href="#cotk.dataloader.Dataloader.load_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a subclass of <code class="docutils literal notranslate"><span class="pre">class_name</span></code>, case insensitively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>class_name</strong> (<em>str</em>) – target class name.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="languageprocessing">
<h2>LanguageProcessing<a class="headerlink" href="#languageprocessing" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cotk.dataloader.LanguageProcessing">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">LanguageProcessing</code><span class="sig-paren">(</span><em class="sig-param">file_id</em>, <em class="sig-param">fields</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Dataloader" title="cotk.dataloader.Dataloader"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Dataloader</span></code></a></p>
<p>Base class for all language processing tasks. This is an abstract class.</p>
<p>During the initialization of a dataloader, <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>, <a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a> or <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> may be created.
See <a class="reference internal" href="#customized-tasks-ref"><span class="std std-ref">how to create a dataloader</span></a>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul>
<li><p><strong>file_id</strong> (<em>str</em>) – A string indicating the source (path) of the dataset. It can be local path (<code class="docutils literal notranslate"><span class="pre">&quot;./data&quot;</span></code>), a resource name
(<code class="docutils literal notranslate"><span class="pre">&quot;resources://dataset&quot;</span></code>), or an url (<code class="docutils literal notranslate"><span class="pre">&quot;http://test.com/dataset.zip&quot;</span></code>).
See <a class="reference internal" href="resources.html#file-id"><span class="std std-ref">the details of file id</span></a>.</p></li>
<li><p><strong>fields</strong> (<em>List, OrderedDict, Dict</em>) – This arguments supports multiple input types:</p>
<ul>
<li><p>If <code class="docutils literal notranslate"><span class="pre">OrderDict</span></code> or <code class="docutils literal notranslate"><span class="pre">List</span></code>, it specify <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">format</span></code> of the <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code> set.</p>
<blockquote>
<div><ul>
<li><p>A <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">format</span></code> should be an <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> or a <code class="docutils literal notranslate"><span class="pre">List[Tuple]</span></code> can be converted to <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">key</span></code> of <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">format</span></code> is the name of a Field (used by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_batch()</span></code></a>),
and the <code class="docutils literal notranslate"><span class="pre">value</span></code> is either a class name of a Field or a <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> object.</p></li>
<li><p>Examples:</p>
<blockquote>
<div><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">postField</span> <span class="o">=</span> <span class="n">SentenceDefault</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">respField</span> <span class="o">=</span> <span class="n">SentenceDefault</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_format</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="n">postField</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="n">respField</span><span class="p">)]</span>
</pre></div>
</div>
<p>or</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data_format</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;resp&quot;</span><span class="p">,</span> <span class="s2">&quot;SentenceDefault&quot;</span><span class="p">)]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Examples:</p>
<blockquote>
<div><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fields</span> <span class="o">=</span> <span class="n">data_format</span>
</pre></div>
</div>
<p>equals to</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fields</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;train&quot;</span><span class="p">:</span> <span class="n">data_format</span><span class="p">,</span> <span class="s2">&quot;dev&quot;</span><span class="p">:</span> <span class="n">data_format</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">:</span> <span class="n">data_format</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">Dict</span></code>, <code class="docutils literal notranslate"><span class="pre">fields[key]</span></code> describes <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">format</span></code> of the set named <code class="docutils literal notranslate"><span class="pre">key</span></code>. Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fields</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;train&quot;</span><span class="p">:</span> <span class="n">data_format</span><span class="p">,</span> <span class="s2">&quot;extra&quot;</span><span class="p">:</span> <span class="n">data_format</span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>See <a class="reference internal" href="#customized-tasks-ref"><span class="std std-ref">how to create a dataloader</span></a>.</p></li>
</ul>
</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.simple_create">
<em class="property">static </em><code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">simple_create</code><span class="sig-paren">(</span><em class="sig-param">file_id</em>, <em class="sig-param">fields</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span> &#x2192; cotk.dataloader.dataloader.LanguageProcessing<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.simple_create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.simple_create" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple way to create a dataloader. Instead of using <a class="reference internal" href="#cotk.dataloader.VocabContext" title="cotk.dataloader.VocabContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">VocabContext</span></code></a>
and <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a>, specifying all the possible parameters here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_id</strong> (<em>str</em>) – A string indicating the source (path) of the dataset. It can be local path (<code class="docutils literal notranslate"><span class="pre">&quot;./data&quot;</span></code>), a resource name
(<code class="docutils literal notranslate"><span class="pre">&quot;resources://dataset&quot;</span></code>), or an url (<code class="docutils literal notranslate"><span class="pre">&quot;http://test.com/dataset.zip&quot;</span></code>).
See <a class="reference internal" href="resources.html#file-id"><span class="std std-ref">the details of file id</span></a>.</p></li>
<li><p><strong>fields</strong> (<em>List, OrderedDict, Dict</em>) – See initialization of <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a> for explanation.</p></li>
<li><p><strong>**kwargs</strong> – Arguments passed to created <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> and <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<div class="section" id="tokenizer-vocabulary-and-field">
<h3>Tokenizer, Vocabulary, and Field<a class="headerlink" href="#tokenizer-vocabulary-and-field" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="cotk.dataloader.LanguageProcessing.fields">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">fields</code><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.fields" title="Permalink to this definition">¶</a></dt>
<dd><p>This instance attribute shows fields of the dataloader (See the initialization of <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a>).
For example, the fields can be printed as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;train&#39;</span><span class="p">:</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;sent&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">cotk</span><span class="o">.</span><span class="n">dataloader</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">SentenceDefault</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x000001E170F8B588</span><span class="o">&gt;</span><span class="p">)]),</span>
    <span class="s1">&#39;dev&#39;</span><span class="p">:</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;sent&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">cotk</span><span class="o">.</span><span class="n">dataloader</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">SentenceDefault</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x000001E170F8BB48</span><span class="o">&gt;</span><span class="p">)]),</span>
    <span class="s1">&#39;test&#39;</span><span class="p">:</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;sent&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">cotk</span><span class="o">.</span><span class="n">dataloader</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">SentenceDefault</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x000001E170F8BEC8</span><span class="o">&gt;</span><span class="p">)])}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_default_tokenizer">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_default_tokenizer</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; cotk.dataloader.tokenizer.Tokenizer<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_default_tokenizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_default_tokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the default <a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a> in this dataloader.
It can be set by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.set_default_field" title="cotk.dataloader.LanguageProcessing.set_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_field()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_default_vocab">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_default_vocab</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; cotk.dataloader.vocab.Vocab<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_default_vocab"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the default <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> in this dataloader.
It can be set by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.set_default_field" title="cotk.dataloader.LanguageProcessing.set_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_field()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_default_field">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_default_field</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; cotk.dataloader.field.Field<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_default_field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the default <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> in this dataloader.
It can be set by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.set_default_field" title="cotk.dataloader.LanguageProcessing.set_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_field()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.set_default_field">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">set_default_field</code><span class="sig-paren">(</span><em class="sig-param">set_name</em>, <em class="sig-param">field_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.set_default_field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.set_default_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the default <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> in this dataloader. In the meanwhile,
the default <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> and <a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a> is also set according
to the field (if the field have vocab and tokenizer).</p>
<p>The default field will affect the action in the following methods:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.tokenize" title="cotk.dataloader.LanguageProcessing.tokenize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tokenize()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.tokenize_sentences" title="cotk.dataloader.LanguageProcessing.tokenize_sentences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tokenize_sentences()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.convert_tokens_to_ids" title="cotk.dataloader.LanguageProcessing.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.convert_ids_to_tokens" title="cotk.dataloader.LanguageProcessing.convert_ids_to_tokens"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_ids_to_tokens()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.convert_ids_to_sentence" title="cotk.dataloader.LanguageProcessing.convert_ids_to_sentence"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_ids_to_sentence()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.convert_sentence_to_ids" title="cotk.dataloader.LanguageProcessing.convert_sentence_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_sentence_to_ids()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.add_special_to_ids" title="cotk.dataloader.LanguageProcessing.add_special_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_special_to_ids()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.remove_special_in_ids" title="cotk.dataloader.LanguageProcessing.remove_special_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove_special_in_ids()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.process_sentences" title="cotk.dataloader.LanguageProcessing.process_sentences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">process_sentences()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.trim_in_ids" title="cotk.dataloader.LanguageProcessing.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_special_tokens_mapping" title="cotk.dataloader.LanguageProcessing.get_special_tokens_mapping"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_special_tokens_mapping()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_special_tokens_id" title="cotk.dataloader.LanguageProcessing.get_special_tokens_id"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_special_tokens_id()</span></code></a></p></li>
<li><p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_tokenizer" title="cotk.dataloader.LanguageProcessing.get_default_tokenizer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_tokenizer()</span></code></a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_name</strong> (<em>str</em>) – The name of set. For example: <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p></li>
<li><p><strong>field_name</strong> (<em>str</em>) – The name of field.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_field">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_field</code><span class="sig-paren">(</span><em class="sig-param">set_name</em>, <em class="sig-param">field_name</em><span class="sig-paren">)</span> &#x2192; cotk.dataloader.field.Field<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Get <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> according to name of set and field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_name</strong> (<em>str</em>) – The name of set. For example: <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p></li>
<li><p><strong>field_name</strong> (<em>str</em>) – The name of field.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="batched-data">
<h3>Batched Data<a class="headerlink" href="#batched-data" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_batch">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">set_name</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a batch of data with specified <code class="docutils literal notranslate"><span class="pre">indexes</span></code>.
Return a merged dict containing all the data from each field by calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">field.get_batch()</span></code>. See examples in subclasses for the return value of predefined tasks.</p>
<p><a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_next_batch" title="cotk.dataloader.LanguageProcessing.get_next_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_next_batch()</span></code></a>, <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batches" title="cotk.dataloader.LanguageProcessing.get_batches"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_batches()</span></code></a>, <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_all_batch" title="cotk.dataloader.LanguageProcessing.get_all_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_all_batch()</span></code></a> provide other methods to get batched data,
Their return values are consistent with this methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_name</strong> (<em>str</em>) – The name of set. For example: <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p></li>
<li><p><strong>indexes</strong> (<em>list</em>) – a list of specified indexes of batched data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.restart">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">restart</code><span class="sig-paren">(</span><em class="sig-param">set_name</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">shuffle=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.restart"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.restart" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize batches. This function be called before <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_next_batch" title="cotk.dataloader.LanguageProcessing.get_next_batch"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_next_batch()</span></code></a>
or an epoch is end. See <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_next_batch" title="cotk.dataloader.LanguageProcessing.get_next_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_next_batch()</span></code></a> for examples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_name</strong> (<em>str</em>) – The name of set. For example: <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p></li>
<li><p><strong>batch_size</strong> (<em>int</em>) – the number of sample in a batch.
default: if <code class="docutils literal notranslate"><span class="pre">None</span></code>, last <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> is used.</p></li>
<li><p><strong>shuffle</strong> (<em>bool</em>) – whether to shuffle the data. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_next_batch">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_next_batch</code><span class="sig-paren">(</span><em class="sig-param">set_name</em>, <em class="sig-param">ignore_left_samples=False</em><span class="sig-paren">)</span> &#x2192; Optional[Dict[str, Any]]<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_next_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_next_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get next batch. It can be called only after Initializing batches (<a class="reference internal" href="#cotk.dataloader.LanguageProcessing.restart" title="cotk.dataloader.LanguageProcessing.restart"><code class="xref py py-func docutils literal notranslate"><span class="pre">restart()</span></code></a>).
Return a dict like <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_batch()</span></code></a>, or None if the epoch is end.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_name</strong> (<em>str</em>) – The name of set. For example: <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p></li>
<li><p><strong>ignore_left_samples</strong> (<em>bool</em>) – If the number of the samples is not divisible by <code class="docutils literal notranslate"><span class="pre">batch_size</span></code>, ignore the left samples less than <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> Setting it to <code class="docutils literal notranslate"><span class="pre">True</span></code> make that every batch will have the same number of samples. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataloader</span><span class="o">.</span><span class="n">restart</span><span class="p">(</span><span class="s2">&quot;train&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">data</span> <span class="o">=</span> <span class="n">dataloader</span><span class="o">.</span><span class="n">get_next_batch</span><span class="p">(</span><span class="s2">&quot;train&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">break</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_batches">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_batches</code><span class="sig-paren">(</span><em class="sig-param">set_name</em>, <em class="sig-param">batch_size=None</em>, <em class="sig-param">shuffle=True</em>, <em class="sig-param">ignore_left_samples=False</em><span class="sig-paren">)</span> &#x2192; Iterable[Dict[str, Any]]<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_batches"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_batches" title="Permalink to this definition">¶</a></dt>
<dd><p>An iterable generator over batches. It first call <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.restart" title="cotk.dataloader.LanguageProcessing.restart"><code class="xref py py-func docutils literal notranslate"><span class="pre">restart()</span></code></a>, and then <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_next_batch" title="cotk.dataloader.LanguageProcessing.get_next_batch"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_next_batch()</span></code></a>
until no more data is available. Returns an iterable generator where each element is like <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_batch()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_name</strong> (<em>str</em>) – The name of set. For example: <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p></li>
<li><p><strong>batch_size</strong> (<em>int, optional</em>) – default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.  Use <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> by default.</p></li>
<li><p><strong>shuffle</strong> (<em>bool</em>) – whether to shuffle the data. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>ignore_left_samples</strong> (<em>bool</em>) – If the number of the samples is not divisible by <code class="docutils literal notranslate"><span class="pre">batch_size</span></code>, ignore the left samples less than <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> Setting it to <code class="docutils literal notranslate"><span class="pre">True</span></code> make that every batch will have the same number of samples. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_all_batch">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_all_batch</code><span class="sig-paren">(</span><em class="sig-param">set_name</em><span class="sig-paren">)</span> &#x2192; Dict[str, List[Any]]<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_all_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_all_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Concatenate all batches to a single dict, where padding will not be applied.</p>
<p>Returns a dict like <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_batch()</span></code></a> with all valid <code class="docutils literal notranslate"><span class="pre">indexes</span></code>,
but all the sentences are not padded and their type will be converted to list.
Exactly, this function called <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_batch()</span></code></a> where <code class="docutils literal notranslate"><span class="pre">len(indexes)==1</span></code> multiple times
and concatenate all the values in the returned dicts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>set_name</strong> (<em>str</em>) – The name of set. For example: <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p>
</dd>
</dl>
</dd></dl>

</div></blockquote>
</div>
<div class="section" id="sentences-and-manipulations">
<h3>Sentences and Manipulations<a class="headerlink" href="#sentences-and-manipulations" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.tokenize">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">tokenize</code><span class="sig-paren">(</span><em class="sig-param">sentence</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize <code class="docutils literal notranslate"><span class="pre">sentence</span></code>.</p>
<p>It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">sentence</span></code>,       from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a>.</p>
<ul class="simple">
<li><p>Convert tokens to lower case if <code class="docutils literal notranslate"><span class="pre">sentence.convert_to_lower_letter</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sentence</strong> (<em>str</em>) – The sentence to be tokenized.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.tokenize_sentences">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">tokenize_sentences</code><span class="sig-paren">(</span><em class="sig-param">sentences</em><span class="sig-paren">)</span> &#x2192; List[List[str]]<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.tokenize_sentences" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize <code class="docutils literal notranslate"><span class="pre">sentences</span></code>.</p>
<p>It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">sentence</span></code>,       from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a>.</p>
<ul class="simple">
<li><p>Convert tokens to lower case if <code class="docutils literal notranslate"><span class="pre">sentence.convert_to_lower_letter</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sentences</strong> (<em>List[str]</em>) – The list of sentence to be tokenized.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.convert_tokens_to_ids">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">convert_tokens_to_ids</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">add_special=False</em>, <em class="sig-param">only_frequent_word=False</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.convert_tokens_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of tokens to list of ids. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">sentence</span></code>,        from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokens</strong> (<em>List[str]</em>) – The tokens to be converted.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.convert_ids_to_tokens">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">convert_ids_to_tokens</code><span class="sig-paren">(</span><em class="sig-param">ids</em>, <em class="sig-param">remove_special=True</em>, <em class="sig-param">trim=True</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.convert_ids_to_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of ids to list of tokens. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">sentence</span></code>,        from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>List[int]</em>) – The ids to be converted.</p></li>
<li><p><strong>remove_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, detect and try to do a reverse operation of <code class="docutils literal notranslate"><span class="pre">add_special</span></code> in <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.convert_tokens_to_ids" title="cotk.dataloader.LanguageProcessing.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a>.
It will not remove <code class="docutils literal notranslate"><span class="pre">unk</span></code> or special tokens in the middle of sentences.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>trim</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.trim_in_ids" title="cotk.dataloader.LanguageProcessing.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a> to remove trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code> and <code class="docutils literal notranslate"><span class="pre">eos</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.convert_ids_to_sentence">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">convert_ids_to_sentence</code><span class="sig-paren">(</span><em class="sig-param">ids</em>, <em class="sig-param">remove_special=True</em>, <em class="sig-param">trim=True</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.convert_ids_to_sentence" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of tokens to a sentence. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">sentence</span></code>,     from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>List[int]</em>) – The ids to be converted.</p></li>
<li><p><strong>remove_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, detect and try to do a reverse operation of <code class="docutils literal notranslate"><span class="pre">add_special</span></code> in <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.convert_tokens_to_ids" title="cotk.dataloader.LanguageProcessing.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a>.
It will not remove <code class="docutils literal notranslate"><span class="pre">unk</span></code> or special tokens in the middle of sentences.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>trim</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.trim_in_ids" title="cotk.dataloader.LanguageProcessing.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a> to remove trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code> and <code class="docutils literal notranslate"><span class="pre">eos</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.convert_sentence_to_ids">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">convert_sentence_to_ids</code><span class="sig-paren">(</span><em class="sig-param">sentence</em>, <em class="sig-param">add_special=False</em>, <em class="sig-param">only_frequent_word=False</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.convert_sentence_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a sentence to a list of ids. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">sentence</span></code>,      from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sentence</strong> (<em>str</em>) – The sentence to be converted.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.add_special_to_ids">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">add_special_to_ids</code><span class="sig-paren">(</span><em class="sig-param">ids</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.add_special_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Add special tokens, such as <code class="docutils literal notranslate"><span class="pre">go_id</span></code> or <code class="docutils literal notranslate"><span class="pre">eos_id</span></code> to the input <code class="docutils literal notranslate"><span class="pre">ids</span></code>. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">sentence</span></code>,     from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ids</strong> (<em>List[int]</em>) – The input ids.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.remove_special_in_ids">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">remove_special_in_ids</code><span class="sig-paren">(</span><em class="sig-param">ids</em>, <em class="sig-param">remove_special=True</em>, <em class="sig-param">trim=True</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.remove_special_in_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove special ids in input <cite>ids</cite>. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">sentence</span></code>,        from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>List[int]</em>) – Input ids.</p></li>
<li><p><strong>remove_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, detect and try to do a reverse operation of <code class="docutils literal notranslate"><span class="pre">add_special</span></code> in <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.convert_tokens_to_ids" title="cotk.dataloader.LanguageProcessing.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a>.
It will not remove <code class="docutils literal notranslate"><span class="pre">unk</span></code> or special tokens in the middle of sentences.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>trim</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.trim_in_ids" title="cotk.dataloader.LanguageProcessing.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a> to remove trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code> and <code class="docutils literal notranslate"><span class="pre">eos</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.process_sentences">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">process_sentences</code><span class="sig-paren">(</span><em class="sig-param">sentences</em>, <em class="sig-param">add_special=True</em>, <em class="sig-param">only_frequent_word=False</em>, <em class="sig-param">cut=True</em><span class="sig-paren">)</span> &#x2192; List[List[int]]<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.process_sentences" title="Permalink to this definition">¶</a></dt>
<dd><p>Process input sentences.</p>
<p>It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">sentence</span></code>,       from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a>.</p>
<ul class="simple">
<li><p>If sentences haven’t been tokenized, tokenize them by invoking <a class="reference internal" href="#cotk.dataloader.Sentence.tokenize_sentences" title="cotk.dataloader.Sentence.tokenize_sentences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sentence.tokenize_sentences()</span></code></a>.</p></li>
<li><p>Then, convert the list of tokens to a list of ids.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">sentence.max_sent_length</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">cut</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>,
sentences, whose length are more than <code class="docutils literal notranslate"><span class="pre">sentence.max_sent_length</span></code>, are
shorten to first <code class="docutils literal notranslate"><span class="pre">sentence.max_sent_length</span></code> tokens.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sentences</strong> (<em>List[str], List[List[str]]</em>) – <cite>sentences</cite> can be a list of sentences or a list of lists of tokens.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>cut</strong> (<em>bool, optional</em>) – Whether to cut sentences with too many tokens. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.trim_in_ids">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">trim_in_ids</code><span class="sig-paren">(</span><em class="sig-param">ids</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.trim_in_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the first special token indicating the sentence is over and remove all the tokens after it (included).
Then remove all trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code>. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">sentence</span></code>,     from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_field" title="cotk.dataloader.LanguageProcessing.get_default_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_field()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ids</strong> (<em>List[int]</em>) – The input ids.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="id1">
<h3>Vocabulary<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="cotk.dataloader.LanguageProcessing.frequent_vocab_size">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">frequent_vocab_size</code><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.frequent_vocab_size" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The number of <strong>frequent</strong> words. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">vocab</span></code>,      from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.LanguageProcessing.all_vocab_size">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">all_vocab_size</code><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.all_vocab_size" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The number of frequent words and rare words. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">vocab</span></code>,       from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.LanguageProcessing.frequent_vocab_list">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">frequent_vocab_list</code><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.frequent_vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – The list of frequent words. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">vocab</span></code>,       from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.LanguageProcessing.all_vocab_list">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">all_vocab_list</code><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.all_vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – The list of frequent words and rare words. Frequent words are always in the front of the list. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">vocab</span></code>,        from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_special_tokens_mapping">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_special_tokens_mapping</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; MutableMapping[str, str]<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_special_tokens_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Get special tokens mapping. Special tokens mapping is an ordered dict       mapping the general name of special tokens to its string.       The key must be one of the following:       <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.      The value can be arbitrary string, e.g., <code class="docutils literal notranslate"><span class="pre">&quot;&lt;pad&gt;&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;&lt;unk&gt;&quot;</span></code>. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">vocab</span></code>,      from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_special_tokens_id">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_special_tokens_id</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_special_tokens_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get id of special token specifying the general name.
Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no such token in this instance. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">vocab</span></code>,       from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – the general name, must be one of the following,
<code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.LanguageProcessing.pad_id">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">pad_id</code><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.pad_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of pad token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no pad token in this instance. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">vocab</span></code>,      from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.LanguageProcessing.unk_id">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">unk_id</code><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.unk_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of unk token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no unk token in this instance. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">vocab</span></code>,      from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.LanguageProcessing.go_id">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">go_id</code><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.go_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of go token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no go token in this instance. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">vocab</span></code>,        from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.LanguageProcessing.eos_id">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">eos_id</code><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.eos_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of eos token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no eos token in this instance. It calls the identical method of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance <code class="docutils literal notranslate"><span class="pre">vocab</span></code>,      from <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_default_vocab" title="cotk.dataloader.LanguageProcessing.get_default_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_vocab()</span></code></a>.</p>
</dd></dl>

</div>
<div class="section" id="hash">
<h3>Hash<a class="headerlink" href="#hash" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_general_hash">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_general_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_general_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_general_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>General hash. Identifying all details in dataloader,
including raw data before processed, tokenized data, vocabulary, and settings.</p>
<p>See <a class="reference internal" href="#dataloader-hash-ref"><span class="std std-ref">dataloader hash</span></a> for explaination.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_raw_data_hash">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_raw_data_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_raw_data_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_raw_data_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Raw data hash. Identifying raw data before processed.</p>
<p>See <a class="reference internal" href="#dataloader-hash-ref"><span class="std std-ref">dataloader hash</span></a> for explaination.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_data_hash">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_data_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_data_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_data_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Data hash. Identifying data after processed (tokenized).</p>
<p>See <a class="reference internal" href="#dataloader-hash-ref"><span class="std std-ref">dataloader hash</span></a> for explaination.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_vocab_hash">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_vocab_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_vocab_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_vocab_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Vocab hash. Identifying vocabulary.</p>
<p>See <a class="reference internal" href="#dataloader-hash-ref"><span class="std std-ref">dataloader hash</span></a> for explaination.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageProcessing.get_setting_hash">
<code class="sig-prename descclassname">LanguageProcessing.</code><code class="sig-name descname">get_setting_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/dataloader.html#LanguageProcessing.get_setting_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageProcessing.get_setting_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Setting hash, identifying settings to create the data loader.</p>
<p>See <a class="reference internal" href="#dataloader-hash-ref"><span class="std std-ref">dataloader hash</span></a> for explaination.</p>
</dd></dl>

</div>
</div>
<div class="section" id="languagegeneration">
<h2>LanguageGeneration<a class="headerlink" href="#languagegeneration" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cotk.dataloader.LanguageGeneration">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">LanguageGeneration</code><span class="sig-paren">(</span><em class="sig-param">file_id</em>, <em class="sig-param">*</em>, <em class="sig-param">tokenizer=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em>, <em class="sig-param">min_frequent_vocab_times=None</em>, <em class="sig-param">min_rare_vocab_times=None</em>, <em class="sig-param">pretrained=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/language_generation.html#LanguageGeneration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageGeneration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.LanguageProcessing</span></code></a></p>
<p>This class is supported for language modeling tasks or language generation tasks
without any inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_id</strong> (<em>str</em>) – A string indicating the source (path) of the dataset. It can be local path (<code class="docutils literal notranslate"><span class="pre">&quot;./data&quot;</span></code>), a resource name
(<code class="docutils literal notranslate"><span class="pre">&quot;resources://dataset&quot;</span></code>), or an url (<code class="docutils literal notranslate"><span class="pre">&quot;http://test.com/dataset.zip&quot;</span></code>).
See <a class="reference internal" href="resources.html#file-id"><span class="std std-ref">the details of file id</span></a>.</p></li>
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>min_frequent_vocab_times</strong> (<em>int, optional</em>) – Tokens from training data appeared
no less than <code class="docutils literal notranslate"><span class="pre">min_frequent_vocab_times</span></code> will be regarded as frequent words. Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>min_rare_vocab_times</strong> (<em>int, optional</em>) – Tokens from training data or test data
appeared more than <code class="docutils literal notranslate"><span class="pre">min_rare_vocab_times</span></code> will be regarded as rare words
(frequent word excluded).  Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>pretrained</strong> (<em>str, optional</em>) – Use <a class="reference internal" href="#pretrained-field-ref"><span class="std std-ref">pretrained field</span></a> instead of <a class="reference internal" href="#cotk.dataloader.SentenceDefault" title="cotk.dataloader.SentenceDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceDefault</span></code></a>. Default: If <code class="docutils literal notranslate"><span class="pre">None</span></code>, no pretrained field used.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.LanguageGeneration.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">set_name</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/language_generation.html#LanguageGeneration.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageGeneration.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a batch of data with specified <code class="docutils literal notranslate"><span class="pre">indexes</span></code>.
Returns a dict at least contains:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>sent_length</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>): A 1-d array, the length of sentence in each batch.
Size: <code class="docutils literal notranslate"><span class="pre">[batch_size]</span></code></p></li>
<li><p><strong>sent</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>): A 2-d padding array containing id of tokens.
Only provide frequent tokens. <code class="docutils literal notranslate"><span class="pre">unk_id</span></code> will be used for a rare token.
Size: <code class="docutils literal notranslate"><span class="pre">[batch_size,</span> <span class="pre">max(sent_length)]</span></code></p></li>
<li><p><strong>sent_allvocabs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>): A 2-d padding array containing id of tokens.
Provide both frequent and rare tokens.
Size: <code class="docutils literal notranslate"><span class="pre">[batch_size,</span> <span class="pre">max(sent_length)]</span></code></p></li>
<li><p><strong>sent_str</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List[str]</span></code>): A list containing raw sentences
before tokenizing, converting to ids, or padding.
Do not contain any special tokens.
Size: <code class="docutils literal notranslate"><span class="pre">[batch_size]</span></code></p></li>
</ul>
</div></blockquote>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_next_batch()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_batches()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_all_batch()</span></code> provide other methods to get batched data,
Their return values are consistent with this methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_name</strong> (<em>str</em>) – The name of set. For example: <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p></li>
<li><p><strong>indexes</strong> (<em>list</em>) – a list of specified indexes of batched data.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># all_vocab_list = [&quot;&lt;pad&gt;&quot;, &quot;&lt;unk&gt;&quot;, &quot;&lt;go&gt;&quot;, &quot;&lt;eos&gt;&quot;, &quot;how&quot;, &quot;are&quot;, &quot;you&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   &quot;hello&quot;, &quot;i&quot;, &quot;am&quot;, &quot;fine&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># frequent_vocab_size = 9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># frequent_vocab_list = [&quot;&lt;pad&gt;&quot;, &quot;&lt;unk&gt;&quot;, &quot;&lt;go&gt;&quot;, &quot;&lt;eos&gt;&quot;, &quot;how&quot;, &quot;are&quot;, &quot;you&quot;, &quot;hello&quot;, &quot;i&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataloader</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;train&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">{</span>
<span class="go">    &quot;sent&quot;: numpy.array([</span>
<span class="go">        [2, 4, 5, 6, 3, 0],   # first sentence: &lt;go&gt; how are you &lt;eos&gt; &lt;pad&gt;</span>
<span class="go">        [2, 7, 3, 0, 0, 0],   # second sentence:  &lt;go&gt; hello &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">        [2, 7, 8, 1, 1, 3]    # third sentence: &lt;go&gt; hello i &lt;unk&gt; &lt;unk&gt; &lt;eos&gt;</span>
<span class="go">    ]),</span>
<span class="go">    &quot;sent_length&quot;: numpy.array([5, 3, 6]), # length of sentences</span>
<span class="go">    &quot;sent_allvocabs&quot;: numpy.array([</span>
<span class="go">        [2, 4, 5, 6, 3, 0],   # first sentence: &lt;go&gt; how are you &lt;eos&gt; &lt;pad&gt;</span>
<span class="go">        [2, 7, 3, 0, 0, 0],   # second sentence:  &lt;go&gt; hello &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">        [2, 7, 8, 9, 10, 3]   # third sentence: &lt;go&gt; hello i am fine &lt;eos&gt;</span>
<span class="go">    ]),</span>
<span class="go">    &quot;sent_str&quot;: [</span>
<span class="go">        &quot;how are you&quot;,</span>
<span class="go">        &quot;hello&quot;,</span>
<span class="go">        &quot;hello i am fine&quot;</span>
<span class="go">    ],</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageGeneration.get_teacher_forcing_metric">
<code class="sig-name descname">get_teacher_forcing_metric</code><span class="sig-paren">(</span><em class="sig-param">gen_log_prob_key='gen_log_prob'</em><span class="sig-paren">)</span> &#x2192; cotk.metric.metric.MetricChain<a class="reference internal" href="_modules/cotk/dataloader/language_generation.html#LanguageGeneration.get_teacher_forcing_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageGeneration.get_teacher_forcing_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Get metrics for teacher-forcing. In other words, this function
provides metrics for language modelling task.</p>
<p>It contains:</p>
<ul class="simple">
<li><p><a class="reference internal" href="metric.html#cotk.metric.PerplexityMetric" title="cotk.metric.PerplexityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.PerplexityMetric</span></code></a></p></li>
</ul>
<p>See the above class for details of arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>gen_log_prob_key</strong> (<em>str, optional</em>) – The key of predicted <strong>log</strong> probability over words.          Default: <code class="docutils literal notranslate"><span class="pre">gen_log_prob</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.LanguageGeneration.get_inference_metric">
<code class="sig-name descname">get_inference_metric</code><span class="sig-paren">(</span><em class="sig-param">gen_key='gen'</em>, <em class="sig-param">sample_in_bleu=1000</em>, <em class="sig-param">sample_in_ngram_perplexity=10000</em>, <em class="sig-param">seed=1229</em>, <em class="sig-param">cpu_count=None</em><span class="sig-paren">)</span> &#x2192; cotk.metric.metric.MetricChain<a class="reference internal" href="_modules/cotk/dataloader/language_generation.html#LanguageGeneration.get_inference_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.LanguageGeneration.get_inference_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Get metrics for inference. In other words, this function provides metrics for
language generation tasks.</p>
<p>It contains:</p>
<ul class="simple">
<li><p><a class="reference internal" href="metric.html#cotk.metric.SelfBleuCorpusMetric" title="cotk.metric.SelfBleuCorpusMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.SelfBleuCorpusMetric</span></code></a></p></li>
<li><p><a class="reference internal" href="metric.html#cotk.metric.FwBwBleuCorpusMetric" title="cotk.metric.FwBwBleuCorpusMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.FwBwBleuCorpusMetric</span></code></a></p></li>
<li><p><a class="reference internal" href="metric.html#cotk.metric.NgramFwBwPerplexityMetric" title="cotk.metric.NgramFwBwPerplexityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.NgramFwBwPerplexityMetric</span></code></a></p></li>
<li><p><a class="reference internal" href="metric.html#cotk.metric.LanguageGenerationRecorder" title="cotk.metric.LanguageGenerationRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.LanguageGenerationRecorder</span></code></a></p></li>
</ul>
<p>See the above class for details of arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gen_key</strong> (<em>str, optional</em>) – The key of generated sentences. Default: <code class="docutils literal notranslate"><span class="pre">gen</span></code>.</p></li>
<li><p><strong>sample_in_bleu</strong> (<em>int, optional</em>) – Number of examples sampled from the generated sentences. Default: <code class="docutils literal notranslate"><span class="pre">1000</span></code>.</p></li>
<li><p><strong>sample_in_ngram_perplexity</strong> (<em>int, optional</em>) – Number of examples sampled from the generated sentences. Default: <code class="docutils literal notranslate"><span class="pre">10000</span></code>.</p></li>
<li><p><strong>seed</strong> (<em>int, optional</em>) – Random seed for sampling. Default: <code class="docutils literal notranslate"><span class="pre">1229</span></code>.</p></li>
<li><p><strong>cpu_count</strong> (<em>int, optional</em>) – Number of used cpu for multiprocessing. Multiprocessing will <strong>NOT</strong> be used             when <code class="docutils literal notranslate"><span class="pre">cpu_count</span></code> is set to <code class="docutils literal notranslate"><span class="pre">1</span></code> or the dataset is small. Default: If <code class="docutils literal notranslate"><span class="pre">None</span></code>,           the environment variable <code class="docutils literal notranslate"><span class="pre">CPU_COUNT</span></code> will be used when available,             or all available cpu will be used otherwise.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="mscoco">
<h3>MSCOCO<a class="headerlink" href="#mscoco" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.MSCOCO">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">MSCOCO</code><span class="sig-paren">(</span><em class="sig-param">file_id</em>, <em class="sig-param">*</em>, <em class="sig-param">tokenizer='nltk'</em>, <em class="sig-param">max_sent_length=50</em>, <em class="sig-param">convert_to_lower_letter=False</em>, <em class="sig-param">min_frequent_vocab_times=10</em>, <em class="sig-param">min_rare_vocab_times=0</em>, <em class="sig-param">pretrained=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/language_generation.html#MSCOCO"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.MSCOCO" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.LanguageGeneration" title="cotk.dataloader.LanguageGeneration"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.LanguageGeneration</span></code></a></p>
<p>A dataloader for preprocessed MSCOCO dataset.
Refer to <a class="reference internal" href="#cotk.dataloader.LanguageGeneration" title="cotk.dataloader.LanguageGeneration"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageGeneration</span></code></a> and <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a> for attributes and methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_id</strong> (<em>str</em>) – A string indicating the source (path) of the dataset. It can be local path (<code class="docutils literal notranslate"><span class="pre">&quot;./data&quot;</span></code>), a resource name
(<code class="docutils literal notranslate"><span class="pre">&quot;resources://dataset&quot;</span></code>), or an url (<code class="docutils literal notranslate"><span class="pre">&quot;http://test.com/dataset.zip&quot;</span></code>).
See <a class="reference internal" href="resources.html#file-id"><span class="std std-ref">the details of file id</span></a>. Default: <code class="docutils literal notranslate"><span class="pre">resources://MSCOCO</span></code>.</p></li>
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. Default: <code class="docutils literal notranslate"><span class="pre">nltk</span></code></p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code></p></li>
<li><p><strong>min_frequent_vocab_times</strong> (<em>int, optional</em>) – Tokens from training data appeared
no less than <code class="docutils literal notranslate"><span class="pre">min_frequent_vocab_times</span></code> will be regarded as frequent words. Default: <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p></li>
<li><p><strong>min_rare_vocab_times</strong> (<em>int, optional</em>) – Tokens from training data or test data
appeared more than <code class="docutils literal notranslate"><span class="pre">min_rare_vocab_times</span></code> will be regarded as rare words
(frequent word excluded).  Default: <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><strong>pretrained</strong> (<em>str, optional</em>) – Use <a class="reference internal" href="#pretrained-field-ref"><span class="std std-ref">pretrained field</span></a> instead of <a class="reference internal" href="#cotk.dataloader.SentenceDefault" title="cotk.dataloader.SentenceDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceDefault</span></code></a>. Default: If <code class="docutils literal notranslate"><span class="pre">None</span></code>, no pretrained field used.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="http://images.cocodataset.org/annotations/annotations_trainval2017.zip">http://images.cocodataset.org/annotations/annotations_trainval2017.zip</a></p>
<p>[2] Chen X, Fang H, Lin T Y, et al. Microsoft COCO Captions:
Data Collection and Evaluation Server. arXiv:1504.00325, 2015.</p>
</dd></dl>

</div>
</div>
<div class="section" id="singleturndialog">
<h2>SingleTurnDialog<a class="headerlink" href="#singleturndialog" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cotk.dataloader.SingleTurnDialog">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SingleTurnDialog</code><span class="sig-paren">(</span><em class="sig-param">file_id</em>, <em class="sig-param">*</em>, <em class="sig-param">tokenizer=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em>, <em class="sig-param">min_frequent_vocab_times=None</em>, <em class="sig-param">min_rare_vocab_times=None</em>, <em class="sig-param">pretrained=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/single_turn_dialog.html#SingleTurnDialog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SingleTurnDialog" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.LanguageProcessing</span></code></a></p>
<p>This class is supported for sequence to sequence generation tasks, especially
single turn dialog tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_id</strong> (<em>str</em>) – A string indicating the source (path) of the dataset. It can be local path (<code class="docutils literal notranslate"><span class="pre">&quot;./data&quot;</span></code>), a resource name
(<code class="docutils literal notranslate"><span class="pre">&quot;resources://dataset&quot;</span></code>), or an url (<code class="docutils literal notranslate"><span class="pre">&quot;http://test.com/dataset.zip&quot;</span></code>).
See <a class="reference internal" href="resources.html#file-id"><span class="std std-ref">the details of file id</span></a>.</p></li>
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>min_frequent_vocab_times</strong> (<em>int, optional</em>) – Tokens from training data appeared
no less than <code class="docutils literal notranslate"><span class="pre">min_frequent_vocab_times</span></code> will be regarded as frequent words. Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>min_rare_vocab_times</strong> (<em>int, optional</em>) – Tokens from training data or test data
appeared more than <code class="docutils literal notranslate"><span class="pre">min_rare_vocab_times</span></code> will be regarded as rare words
(frequent word excluded).  Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>pretrained</strong> (<em>str, optional</em>) – Use <a class="reference internal" href="#pretrained-field-ref"><span class="std std-ref">pretrained field</span></a> instead of <a class="reference internal" href="#cotk.dataloader.SentenceDefault" title="cotk.dataloader.SentenceDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceDefault</span></code></a>. Default: If <code class="docutils literal notranslate"><span class="pre">None</span></code>, no pretrained field used.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.SingleTurnDialog.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">set_name</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/single_turn_dialog.html#SingleTurnDialog.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SingleTurnDialog.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a batch of data with specified <code class="docutils literal notranslate"><span class="pre">indexes</span></code>.
Return a dict contains:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>post_length</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>): A 1-d array, the length of post in each batch.              Size: <code class="docutils literal notranslate"><span class="pre">[batch_size]</span></code></p></li>
<li><p><strong>post</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>): A 2-d padded array containing tokens of id form in posts.              Only provide frequent tokens. <code class="docutils literal notranslate"><span class="pre">unk_id</span></code> will be used for a rare token.                 Size: <code class="docutils literal notranslate"><span class="pre">[batch_size,</span> <span class="pre">max(sent_length)]</span></code></p></li>
<li><p><strong>post_allvocabs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>): A 2-d padded array containing tokens of id               form in posts. Provide both frequent and rare vocabs.               Size: <code class="docutils literal notranslate"><span class="pre">[batch_size,</span> <span class="pre">max(sent_length)]</span></code></p></li>
<li><p><strong>post_str</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List[str]</span></code>): A list containing raw posts                before tokenizing, converting to ids, or padding.               Do not contain any special tokens.              Size: <code class="docutils literal notranslate"><span class="pre">[batch_size]</span></code></p></li>
<li><p><strong>resp_length</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>): A 1-d array, the length of response in each batch.              Size: <code class="docutils literal notranslate"><span class="pre">[batch_size]</span></code></p></li>
<li><p><strong>resp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>): A 2-d padded array containing tokens of id form                in responses. Only provide valid vocabs. <code class="docutils literal notranslate"><span class="pre">unk_id</span></code> will be used for a rare token.              Size: <code class="docutils literal notranslate"><span class="pre">[batch_size,</span> <span class="pre">max(sent_length)]</span></code></p></li>
<li><p><strong>resp_allvocabs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>):              A 2-d padded array containing tokens of id form in responses.               Provide both valid and invalid vocabs.              Size: <code class="docutils literal notranslate"><span class="pre">[batch_size,</span> <span class="pre">max(sent_length)]</span></code></p></li>
<li><p><strong>post_str</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List[str]</span></code>): A list containing raw responses                before tokenizing, converting to ids, or padding.               Do not contain any special tokens.              Size: <code class="docutils literal notranslate"><span class="pre">[batch_size]</span></code></p></li>
</ul>
</div></blockquote>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_next_batch()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_batches()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_all_batch()</span></code> provide other methods to get batched data,
Their return values are consistent with this methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_name</strong> (<em>str</em>) – The name of set. For example: <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p></li>
<li><p><strong>indexes</strong> (<em>list</em>) – a list of specified indexes of batched data.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># all_vocab_list = [&quot;&lt;pad&gt;&quot;, &quot;&lt;unk&gt;&quot;, &quot;&lt;go&gt;&quot;, &quot;&lt;eos&gt;&quot;, &quot;how&quot;, &quot;are&quot;, &quot;you&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   &quot;hello&quot;, &quot;i&quot;, &quot;am&quot;, &quot;fine&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># frequent_vocab_size = 9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># frequent_vocab_list = [&quot;&lt;pad&gt;&quot;, &quot;&lt;unk&gt;&quot;, &quot;&lt;go&gt;&quot;, &quot;&lt;eos&gt;&quot;, &quot;how&quot;, &quot;are&quot;, &quot;you&quot;, &quot;hello&quot;, &quot;i&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataloader</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;train&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="go">{</span>
<span class="go">    &quot;post_str&quot;: [</span>
<span class="go">        &quot;are you fine&quot;,</span>
<span class="go">        &quot;hello&quot;,</span>
<span class="go">    ],</span>
<span class="go">    &quot;post_allvocabs&quot;: numpy.array([</span>
<span class="go">        [2, 5, 6, 10, 3],  # first post:  &lt;go&gt; are you fine &lt;eos&gt;</span>
<span class="go">        [2, 7, 3, 0, 0],   # second post: &lt;go&gt; hello &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">    ]),</span>
<span class="go">    &quot;post&quot;: numpy.array([</span>
<span class="go">        [2, 5, 6, 1, 3],   # first post:  &lt;go&gt; are you &lt;unk&gt; &lt;eos&gt;</span>
<span class="go">        [2, 7, 3, 0, 0],   # second post: &lt;go&gt; hello &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">    ]),</span>
<span class="go">    &quot;resp_str&quot;: [</span>
<span class="go">        &quot;i am fine&quot;,</span>
<span class="go">        &quot;hello&quot;</span>
<span class="go">    ],</span>
<span class="go">    &quot;resp_allvocabs&quot;: numpy.array([</span>
<span class="go">        [2, 8, 9, 10, 3],  # first response:  &lt;go&gt; i am fine &lt;eos&gt;</span>
<span class="go">        [2, 7, 3, 0, 0],   # second response: &lt;go&gt; hello &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">    ]),</span>
<span class="go">    &quot;resp&quot;: numpy.array([</span>
<span class="go">        [2, 8, 1, 1, 3],   # first response:  &lt;go&gt; i &lt;unk&gt; &lt;unk&gt; &lt;eos&gt;</span>
<span class="go">        [2, 7, 3, 0, 0],   # second response: &lt;go&gt; hello &lt;eos&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">    ]),</span>
<span class="go">    &quot;post_length&quot;: numpy.array([5, 3]), # length of posts</span>
<span class="go">    &quot;resp_length&quot;: numpy.array([5, 3]), # length of responses</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.SingleTurnDialog.get_teacher_forcing_metric">
<code class="sig-name descname">get_teacher_forcing_metric</code><span class="sig-paren">(</span><em class="sig-param">gen_log_prob_key='gen_log_prob'</em>, <em class="sig-param">generate_rare_vocab=False</em><span class="sig-paren">)</span> &#x2192; MetricChain<a class="reference internal" href="_modules/cotk/dataloader/single_turn_dialog.html#SingleTurnDialog.get_teacher_forcing_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SingleTurnDialog.get_teacher_forcing_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Get metrics for teacher-forcing.</p>
<p>It contains:</p>
<ul class="simple">
<li><p><a class="reference internal" href="metric.html#cotk.metric.PerplexityMetric" title="cotk.metric.PerplexityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.PerplexityMetric</span></code></a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gen_log_prob_key</strong> (<em>str</em>) – The key of predicted log probability over words.
Refer to <a class="reference internal" href="metric.html#cotk.metric.PerplexityMetric" title="cotk.metric.PerplexityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.PerplexityMetric</span></code></a>. Default: <code class="docutils literal notranslate"><span class="pre">gen_log_prob</span></code>.</p></li>
<li><p><strong>generate_rare_vocab</strong> (<em>bool</em>) – Whether <code class="docutils literal notranslate"><span class="pre">gen_log_prob</span></code> contains invalid vocab.
Refer to <a class="reference internal" href="metric.html#cotk.metric.PerplexityMetric" title="cotk.metric.PerplexityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.PerplexityMetric</span></code></a>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.SingleTurnDialog.get_inference_metric">
<code class="sig-name descname">get_inference_metric</code><span class="sig-paren">(</span><em class="sig-param">gen_key='gen'</em><span class="sig-paren">)</span> &#x2192; MetricChain<a class="reference internal" href="_modules/cotk/dataloader/single_turn_dialog.html#SingleTurnDialog.get_inference_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SingleTurnDialog.get_inference_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Get metrics for inference.</p>
<p>It contains:</p>
<ul class="simple">
<li><p><a class="reference internal" href="metric.html#cotk.metric.BleuCorpusMetric" title="cotk.metric.BleuCorpusMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.BleuCorpusMetric</span></code></a></p></li>
<li><p><a class="reference internal" href="metric.html#cotk.metric.SingleTurnDialogRecorder" title="cotk.metric.SingleTurnDialogRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.SingleTurnDialogRecorder</span></code></a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>gen_key</strong> (<em>str</em>) – The key of generated sentences in index form.
Refer to <a class="reference internal" href="metric.html#cotk.metric.BleuCorpusMetric" title="cotk.metric.BleuCorpusMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.BleuCorpusMetric</span></code></a> or
<a class="reference internal" href="metric.html#cotk.metric.SingleTurnDialogRecorder" title="cotk.metric.SingleTurnDialogRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.SingleTurnDialogRecorder</span></code></a>. Default: <code class="docutils literal notranslate"><span class="pre">gen</span></code>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="opensubtitles">
<h3>OpenSubtitles<a class="headerlink" href="#opensubtitles" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.OpenSubtitles">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">OpenSubtitles</code><span class="sig-paren">(</span><em class="sig-param">file_id='resources://OpenSubtitles'</em>, <em class="sig-param">*</em>, <em class="sig-param">tokenizer='nltk'</em>, <em class="sig-param">max_sent_length=50</em>, <em class="sig-param">convert_to_lower_letter=False</em>, <em class="sig-param">min_frequent_vocab_times=10</em>, <em class="sig-param">min_rare_vocab_times=0</em>, <em class="sig-param">pretrained=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/single_turn_dialog.html#OpenSubtitles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.OpenSubtitles" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.SingleTurnDialog" title="cotk.dataloader.SingleTurnDialog"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.SingleTurnDialog</span></code></a></p>
<p>A dataloader for OpenSubtitles dataset.
Refer to <a class="reference internal" href="#cotk.dataloader.SingleTurnDialog" title="cotk.dataloader.SingleTurnDialog"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingleTurnDialog</span></code></a>, <a class="reference internal" href="#cotk.dataloader.LanguageProcessing" title="cotk.dataloader.LanguageProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">LanguageProcessing</span></code></a> for attributes and methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_id</strong> (<em>str</em>) – A string indicating the source (path) of the dataset. It can be local path (<code class="docutils literal notranslate"><span class="pre">&quot;./data&quot;</span></code>), a resource name
(<code class="docutils literal notranslate"><span class="pre">&quot;resources://dataset&quot;</span></code>), or an url (<code class="docutils literal notranslate"><span class="pre">&quot;http://test.com/dataset.zip&quot;</span></code>).
See <a class="reference internal" href="resources.html#file-id"><span class="std std-ref">the details of file id</span></a>. Default: <code class="docutils literal notranslate"><span class="pre">resources://OpenSubtitles</span></code>.</p></li>
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. Default: <code class="docutils literal notranslate"><span class="pre">nltk</span></code></p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">50</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
<li><p><strong>min_frequent_vocab_times</strong> (<em>int, optional</em>) – Tokens from training data appeared
no less than <code class="docutils literal notranslate"><span class="pre">min_frequent_vocab_times</span></code> will be regarded as frequent words. Default: <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p></li>
<li><p><strong>min_rare_vocab_times</strong> (<em>int, optional</em>) – Tokens from training data or test data
appeared more than <code class="docutils literal notranslate"><span class="pre">min_rare_vocab_times</span></code> will be regarded as rare words
(frequent word excluded).  Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>pretrained</strong> (<em>str, optional</em>) – Use <a class="reference internal" href="#pretrained-field-ref"><span class="std std-ref">pretrained field</span></a> instead of <a class="reference internal" href="#cotk.dataloader.SentenceDefault" title="cotk.dataloader.SentenceDefault"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceDefault</span></code></a>. Default: If <code class="docutils literal notranslate"><span class="pre">None</span></code>, no pretrained field used.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="http://opus.nlpl.eu/OpenSubtitles.php">http://opus.nlpl.eu/OpenSubtitles.php</a></p>
<p>[2] P. Lison and J. Tiedemann, OpenSubtitles2016: Extracting Large Parallel Corpora from
Movie and TV Subtitles. LREC 2016.</p>
</dd></dl>

</div>
</div>
<div class="section" id="multiturndialog">
<h2>MultiTurnDialog<a class="headerlink" href="#multiturndialog" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cotk.dataloader.MultiTurnDialog">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">MultiTurnDialog</code><span class="sig-paren">(</span><em class="sig-param">file_id</em>, <em class="sig-param">tokenizer=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">max_turn_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em>, <em class="sig-param">min_frequent_vocab_times=None</em>, <em class="sig-param">min_rare_vocab_times=None</em>, <em class="sig-param">fields=None</em>, <em class="sig-param">pretrained=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/multi_turn_dialog.html#MultiTurnDialog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.MultiTurnDialog" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for multi-turn dialog datasets. This is an abstract class.</p>
<p>Arguments:</p>
<p>Attributes:</p>
<p class="rubric">Notes</p>
<p>A <a class="reference internal" href="#cotk.dataloader.Session" title="cotk.dataloader.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a> field must be set as default field. When invoking <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> of <a class="reference internal" href="#cotk.dataloader.MultiTurnDialog" title="cotk.dataloader.MultiTurnDialog"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiTurnDialog</span></code></a>,
the default field, which may be reset in subclass, is set as self.fields[‘train’][‘session’].</p>
<dl class="method">
<dt id="cotk.dataloader.MultiTurnDialog.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">set_name</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="headerlink" href="#cotk.dataloader.MultiTurnDialog.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a batch of data with specified <code class="docutils literal notranslate"><span class="pre">indexes</span></code>.
Return a merged dict containing all the data from each field by calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">field.get_batch()</span></code>. See examples in subclasses for the return value of predefined tasks.</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_next_batch()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_batches()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_all_batch()</span></code> provide other methods to get batched data,
Their return values are consistent with this methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_name</strong> (<em>str</em>) – The name of set. For example: <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dev&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code>.</p></li>
<li><p><strong>indexes</strong> (<em>list</em>) – a list of specified indexes of batched data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.MultiTurnDialog.get_teacher_forcing_metric">
<code class="sig-name descname">get_teacher_forcing_metric</code><span class="sig-paren">(</span><em class="sig-param">multi_turn_gen_log_prob_key='multi_turn_gen_log_prob'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/multi_turn_dialog.html#MultiTurnDialog.get_teacher_forcing_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.MultiTurnDialog.get_teacher_forcing_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Get metric for teacher-forcing.</p>
<p>It contains:</p>
<ul class="simple">
<li><p><a class="reference internal" href="metric.html#cotk.metric.MultiTurnPerplexityMetric" title="cotk.metric.MultiTurnPerplexityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.MultiTurnPerplexityMetric</span></code></a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>gen_log_prob_key</strong> (<em>str</em>) – The key of predicted log probability over words.
Refer to <a class="reference internal" href="metric.html#cotk.metric.MultiTurnPerplexityMetric" title="cotk.metric.MultiTurnPerplexityMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.MultiTurnPerplexityMetric</span></code></a>. Default: <code class="docutils literal notranslate"><span class="pre">gen_log_prob</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="metric.html#cotk.metric.MetricChain" title="cotk.metric.MetricChain"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.MetricChain</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.MultiTurnDialog.get_inference_metric">
<code class="sig-name descname">get_inference_metric</code><span class="sig-paren">(</span><em class="sig-param">multi_turn_gen_key='multi_turn_gen'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/multi_turn_dialog.html#MultiTurnDialog.get_inference_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.MultiTurnDialog.get_inference_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Get metric for inference.</p>
<p>It contains:</p>
<ul class="simple">
<li><p><a class="reference internal" href="metric.html#cotk.metric.BleuCorpusMetric" title="cotk.metric.BleuCorpusMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.BleuCorpusMetric</span></code></a></p></li>
<li><p><a class="reference internal" href="metric.html#cotk.metric.MultiTurnDialogRecorder" title="cotk.metric.MultiTurnDialogRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.MultiTurnDialogRecorder</span></code></a></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>gen_key</strong> (<em>str</em>) – The key of generated sentences in index form.
Refer to <a class="reference internal" href="metric.html#cotk.metric.BleuCorpusMetric" title="cotk.metric.BleuCorpusMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.BleuCorpusMetric</span></code></a> or <a class="reference internal" href="metric.html#cotk.metric.MultiTurnDialogRecorder" title="cotk.metric.MultiTurnDialogRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.MultiTurnDialogRecorder</span></code></a>.
Default: <code class="docutils literal notranslate"><span class="pre">gen</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="metric.html#cotk.metric.MetricChain" title="cotk.metric.MetricChain"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.MetricChain</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="ubuntucorpus">
<h3>UbuntuCorpus<a class="headerlink" href="#ubuntucorpus" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.UbuntuCorpus">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">UbuntuCorpus</code><span class="sig-paren">(</span><em class="sig-param">file_id='resources://Ubuntu'</em>, <em class="sig-param">min_frequent_vocab_times=10</em>, <em class="sig-param">max_sent_length=50</em>, <em class="sig-param">max_turn_length=20</em>, <em class="sig-param">min_rare_vocab_times=0</em>, <em class="sig-param">tokenizer='nltk'</em>, <em class="sig-param">pretrained=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/multi_turn_dialog.html#UbuntuCorpus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.UbuntuCorpus" title="Permalink to this definition">¶</a></dt>
<dd><p>A dataloader for Ubuntu dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_id</strong> (<em>str</em>) – a str indicates the source of UbuntuCorpus dataset.
Default: <code class="docutils literal notranslate"><span class="pre">resources://Ubuntu</span></code>. A preset dataset is downloaded and cached.</p></li>
<li><p><strong>min_frequent_vocab_times</strong> (<em>int</em>) – A cut-off threshold of valid tokens. All tokens appear
not less than <cite>min_vocab_times</cite> in <strong>training set</strong> will be marked as frequent words.
Default: <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. Default: <code class="docutils literal notranslate"><span class="pre">50</span></code>.</p></li>
<li><p><strong>max_turn_length</strong> (<em>int</em>) – All sessions longer than <code class="docutils literal notranslate"><span class="pre">max_turn_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_turn_length</span></code> sentences. Default: <code class="docutils literal notranslate"><span class="pre">20</span></code>.</p></li>
<li><p><strong>min_rare_vocab_times</strong> (<em>int</em>) – A cut-off threshold of rare tokens. All tokens appear
not less than <code class="docutils literal notranslate"><span class="pre">invalid_vocab_times</span></code> in the <strong>whole dataset</strong> (except valid words) will be
marked as rare words. Otherwise, they are unknown words, both in training or
testing stages. Default: <code class="docutils literal notranslate"><span class="pre">0</span></code> (No unknown words).</p></li>
</ul>
</dd>
</dl>
<p>Refer to <a class="reference internal" href="#cotk.dataloader.MultiTurnDialog" title="cotk.dataloader.MultiTurnDialog"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiTurnDialog</span></code></a> for attributes and methods.</p>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="https://github.com/rkadlec/ubuntu-ranking-dataset-creator">https://github.com/rkadlec/ubuntu-ranking-dataset-creator</a></p>
<p>[2] Lowe R, Pow N, Serban I, et al. The Ubuntu Dialogue Corpus: A Large Dataset
for Research in Unstructured Multi-Turn Dialogue Systems. SIGDIAL 2015.</p>
</dd></dl>

</div>
<div class="section" id="switchboardcorpus">
<h3>SwitchboardCorpus<a class="headerlink" href="#switchboardcorpus" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.SwitchboardCorpus">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SwitchboardCorpus</code><span class="sig-paren">(</span><em class="sig-param">file_id='resources://SwitchboardCorpus'</em>, <em class="sig-param">min_frequent_vocab_times=5</em>, <em class="sig-param">max_sent_length=50</em>, <em class="sig-param">max_turn_length=1000</em>, <em class="sig-param">min_rare_vocab_times=0</em>, <em class="sig-param">tokenizer='nltk'</em>, <em class="sig-param">pretrained=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/multi_turn_dialog.html#SwitchboardCorpus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SwitchboardCorpus" title="Permalink to this definition">¶</a></dt>
<dd><p>A dataloader for Switchboard dataset.</p>
<p>In this dataset, all sessions start with a <code class="docutils literal notranslate"><span class="pre">&lt;d&gt;</span></code> representing empty context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_id</strong> (<em>str</em>) – a string indicating the source of SwitchboardCorpus dataset.
Default: <code class="docutils literal notranslate"><span class="pre">resources://SwitchboardCorpus</span></code>. A preset dataset is downloaded and cached.</p>
</dd>
</dl>
<p>Refer to <a class="reference internal" href="#cotk.dataloader.MultiTurnDialog" title="cotk.dataloader.MultiTurnDialog"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiTurnDialog</span></code></a> for attributes and methods.</p>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="https://catalog.ldc.upenn.edu/LDC97S62">https://catalog.ldc.upenn.edu/LDC97S62</a></p>
<p>[2] John J G and Edward H. Switchboard-1 release 2. Linguistic Data Consortium, Philadelphia 1997.</p>
</dd></dl>

</div>
</div>
<div class="section" id="sentenceclassification">
<h2>SentenceClassification<a class="headerlink" href="#sentenceclassification" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cotk.dataloader.SentenceClassification">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SentenceClassification</code><span class="sig-paren">(</span><em class="sig-param">file_id</em>, <em class="sig-param">tokenizer=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em>, <em class="sig-param">min_frequent_vocab_times=None</em>, <em class="sig-param">min_rare_vocab_times=None</em>, <em class="sig-param">fields=None</em>, <em class="sig-param">pretrained=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/sentence_classification.html#SentenceClassification"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SentenceClassification" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for sentence classification datasets. This is an abstract class.</p>
<p>Arguments:</p>
<p class="rubric">Notes</p>
<p>A <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a> field must be set as default field. When invoking <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code> of <a class="reference internal" href="#cotk.dataloader.SentenceClassification" title="cotk.dataloader.SentenceClassification"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceClassification</span></code></a>,
the default field, which may be reset in subclass, is set as self.fields[‘train’][‘sent’].</p>
<dl class="method">
<dt id="cotk.dataloader.SentenceClassification.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">set_name</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/sentence_classification.html#SentenceClassification.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SentenceClassification.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a batch of specified <cite>indexes</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>set_name</strong> (<em>str</em>) – must be contained in <cite>key_name</cite></p></li>
<li><p><strong>indexes</strong> (<em>list</em>) – a list of specified indexes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><em>(dict)</em> –</p>
<p>A dict at least contains:</p>
<blockquote>
<div><ul class="simple">
<li><p>sent_length(<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.array</span></code>): A 1-d array, the length of sentence in each batch.
Size: <cite>[batch_size]</cite></p></li>
<li><p>sent(<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.array</span></code>): A 2-d padding array containing id of words.
Only provide valid words. <cite>unk_id</cite> will be used if a word is not valid.
Size: <cite>[batch_size, max(sent_length)]</cite></p></li>
<li><p>label(<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.array</span></code>): A 1-d array, the label of sentence in each batch.</p></li>
<li><p>sent_allvocabs(<code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.array</span></code>): A 2-d padding array containing id of words.
Provide both valid and invalid words.
Size: <cite>[batch_size, max(sent_length)]</cite></p></li>
</ul>
</div></blockquote>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># all_vocab_list = [&quot;&lt;pad&gt;&quot;, &quot;&lt;unk&gt;&quot;, &quot;&lt;go&gt;&quot;, &quot;&lt;eos&gt;&quot;, &quot;how&quot;, &quot;are&quot;, &quot;you&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   &quot;hello&quot;, &quot;i&quot;, &quot;am&quot;, &quot;fine&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># vocab_size = 9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># vocab_list = [&quot;&lt;pad&gt;&quot;, &quot;&lt;unk&gt;&quot;, &quot;&lt;go&gt;&quot;, &quot;&lt;eos&gt;&quot;, &quot;how&quot;, &quot;are&quot;, &quot;you&quot;, &quot;hello&quot;, &quot;i&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataloader</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;train&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">{</span>
<span class="go">    &quot;sent&quot;: numpy.array([</span>
<span class="go">            [2, 4, 5, 6, 3, 0],   # first sentence: &lt;go&gt; how are you &lt;eos&gt; &lt;pad&gt;</span>
<span class="go">            [2, 7, 3, 0, 0, 0],   # second sentence:  &lt;go&gt; hello &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">            [2, 7, 8, 1, 1, 3]    # third sentence: &lt;go&gt; hello i &lt;unk&gt; &lt;unk&gt; &lt;eos&gt;</span>
<span class="go">        ]),</span>
<span class="go">    &quot;label&quot;: numpy.array([1, 2, 0]) # label of sentences</span>
<span class="go">    &quot;sent_length&quot;: numpy.array([5, 3, 6]), # length of sentences</span>
<span class="go">    &quot;sent_allvocabs&quot;: numpy.array([</span>
<span class="go">            [2, 4, 5, 6, 3, 0],   # first sentence: &lt;go&gt; how are you &lt;eos&gt; &lt;pad&gt;</span>
<span class="go">            [2, 7, 3, 0, 0, 0],   # second sentence:  &lt;go&gt; hello &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">            [2, 7, 8, 9, 10, 3]   # third sentence: &lt;go&gt; hello i am fine &lt;eos&gt;</span>
<span class="go">        ]),</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.SentenceClassification.get_metric">
<code class="sig-name descname">get_metric</code><span class="sig-paren">(</span><em class="sig-param">prediction_key='prediction'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/sentence_classification.html#SentenceClassification.get_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SentenceClassification.get_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Get metrics for accuracy. In other words, this function
provides metrics for sentence classification task.</p>
<p>It contains:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.AccuracyMetric</span></code></p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prediction_key</strong> (<em>str</em>) – The key of prediction over sentences.
Refer to <code class="xref py py-class docutils literal notranslate"><span class="pre">metric.AccuracyMetric</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">prediction</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="metric.html#cotk.metric.MetricChain" title="cotk.metric.MetricChain"><code class="xref py py-class docutils literal notranslate"><span class="pre">metric.MetricChain</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="sst">
<h3>SST<a class="headerlink" href="#sst" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.SST">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SST</code><span class="sig-paren">(</span><em class="sig-param">file_id</em>, <em class="sig-param">min_frequent_vocab_times=10</em>, <em class="sig-param">max_sent_length=50</em>, <em class="sig-param">min_rare_vocab_times=0</em>, <em class="sig-param">tokenizer='space'</em>, <em class="sig-param">pretrained=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/sentence_classification.html#SST"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SST" title="Permalink to this definition">¶</a></dt>
<dd><p>A dataloader for preprocessed SST dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_id</strong> (<em>str</em>) – a str indicates the source of SST dataset.</p></li>
<li><p><strong>min_frequent_vocab_times</strong> (<em>int</em>) – A cut-off threshold of valid tokens. All tokens appear
not less than <cite>min_frequent_vocab_times</cite> in <strong>training set</strong> will be marked as frequent words.
Default: 10.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int</em>) – All sentences longer than <cite>max_sent_length</cite> will be shortened
to first <cite>max_sent_length</cite> tokens. Default: 50.</p></li>
<li><p><strong>min_rare_vocab_times</strong> (<em>int</em>) – A cut-off threshold of invalid tokens. All tokens appear
not less than <cite>min_rare_vocab_times</cite> in the <strong>whole dataset</strong> (except valid words) will be
marked as rare words. Otherwise, they are unknown words, both in training or
testing stages. Default: 0 (No unknown words).</p></li>
</ul>
</dd>
</dl>
<p>Refer to <a class="reference internal" href="#cotk.dataloader.SentenceClassification" title="cotk.dataloader.SentenceClassification"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceClassification</span></code></a> for attributes and methods.</p>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="http://images.cocodataset.org/annotations/annotations_trainval2017.zip">http://images.cocodataset.org/annotations/annotations_trainval2017.zip</a></p>
<p>[2] Lin T Y, Maire M, Belongie S, et al. Microsoft COCO: Common Objects in Context. ECCV 2014.</p>
</dd></dl>

</div>
</div>
<div class="section" id="id2">
<h2>Field<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cotk.dataloader.Field">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">Field</code><a class="reference internal" href="_modules/cotk/dataloader/field.html#Field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Field" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class of data field, which specify the format of the dataset.
See <a class="reference internal" href="#field-ref"><span class="std std-ref">Field</span></a> and <a class="reference internal" href="#customized-tasks-ref"><span class="std std-ref">building a dataloader of customized task</span></a> for usages.</p>
<p>Notice <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> object may be shared between different fields, data sets or dataloader.
Thus it only defines settings and do NOT stores data.</p>
<dl class="method">
<dt id="cotk.dataloader.Field.get_all_subclasses">
<em class="property">classmethod </em><code class="sig-name descname">get_all_subclasses</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Iterable[Any]<a class="headerlink" href="#cotk.dataloader.Field.get_all_subclasses" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator of all subclasses.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Field.load_class">
<em class="property">classmethod </em><code class="sig-name descname">load_class</code><span class="sig-paren">(</span><em class="sig-param">class_name</em><span class="sig-paren">)</span> &#x2192; Any<a class="headerlink" href="#cotk.dataloader.Field.load_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a subclass of <code class="docutils literal notranslate"><span class="pre">class_name</span></code>, case insensitively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>class_name</strong> (<em>str</em>) – target class name.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Field.get_vocab">
<code class="sig-name descname">get_vocab</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional[cotk.dataloader.vocab.Vocab]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Field.get_vocab"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Field.get_vocab" title="Permalink to this definition">¶</a></dt>
<dd><p>Get <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> object for the field. <code class="docutils literal notranslate"><span class="pre">None</span></code> if the field do not have a <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Field.get_tokenizer">
<code class="sig-name descname">get_tokenizer</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional[cotk.dataloader.tokenizer.Tokenizer]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Field.get_tokenizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Field.get_tokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Get <a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a> object for the field. <code class="docutils literal notranslate"><span class="pre">None</span></code> if the field do not have a <a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Field.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">data</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Field.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Field.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoked by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a>, return the batched data specified by this field.
This function is for INTERNAL USE only, but it shows the data format of the returned batch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the field.</p></li>
<li><p><strong>data</strong> (<em>Any</em>) – the data stored in dataloader.</p></li>
<li><p><strong>indexes</strong> (<em>List[int]</em>) – the indexes of the data in this batch</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<div class="section" id="sentence">
<h3>Sentence<a class="headerlink" href="#sentence" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.Sentence">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">Sentence</code><span class="sig-paren">(</span><em class="sig-param">tokenizer=None</em>, <em class="sig-param">vocab=None</em>, <em class="sig-param">vocab_from_mappings=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Field</span></code></a></p>
<p>A field for sentence. This class is a virtual class and the base of
<a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sentence</span></code></a>, <a class="reference internal" href="#cotk.dataloader.SentenceGPT2" title="cotk.dataloader.SentenceGPT2"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceGPT2</span></code></a> and <a class="reference internal" href="#cotk.dataloader.SentenceBERT" title="cotk.dataloader.SentenceBERT"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentenceBERT</span></code></a>.</p>
<p>If any argument is not specified,
the value will be first retrieved from <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a>. If still <code class="docutils literal notranslate"><span class="pre">None</span></code>, default
value will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>, optional) – The vocabulary used for this field. Sharing this object between fields can
build vocabulary together.  No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab_from_mappings</strong> (<em>Dict[str, str], optional</em>) – Infer the set type (train, test, or extra) from the set name.
For example, <code class="docutils literal notranslate"><span class="pre">DEFAULT_VOCAB_FROM_MAPPINGS[&quot;dev&quot;]</span> <span class="pre">==</span> <span class="pre">&quot;test&quot;</span></code> means that the words from the “dev” set
is used for test. Default: See <a class="reference internal" href="#vocab-from-ref"><span class="std std-ref">the table</span></a> for default value.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Input Formats</dt><dd><p>This field read one line of sentence per sample.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.Sentence.tokenize">
<code class="sig-name descname">tokenize</code><span class="sig-paren">(</span><em class="sig-param">sentence</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence.tokenize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence.tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize <code class="docutils literal notranslate"><span class="pre">sentence</span></code>.</p>
<ul class="simple">
<li><p>Convert tokens to lower case if <code class="docutils literal notranslate"><span class="pre">self.convert_to_lower_letter</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sentence</strong> (<em>str</em>) – The sentence to be tokenized.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.tokenize_sentences">
<code class="sig-name descname">tokenize_sentences</code><span class="sig-paren">(</span><em class="sig-param">sentences</em><span class="sig-paren">)</span> &#x2192; List[List[str]]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence.tokenize_sentences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence.tokenize_sentences" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize <code class="docutils literal notranslate"><span class="pre">sentences</span></code>.</p>
<ul class="simple">
<li><p>Convert tokens to lower case if <code class="docutils literal notranslate"><span class="pre">self.convert_to_lower_letter</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sentences</strong> (<em>List[str]</em>) – The list of sentence to be tokenized.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.convert_tokens_to_ids">
<code class="sig-name descname">convert_tokens_to_ids</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">add_special=False</em>, <em class="sig-param">only_frequent_word=False</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence.convert_tokens_to_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence.convert_tokens_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of tokens to list of ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokens</strong> (<em>List[str]</em>) – The tokens to be converted.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.convert_ids_to_tokens">
<code class="sig-name descname">convert_ids_to_tokens</code><span class="sig-paren">(</span><em class="sig-param">ids</em>, <em class="sig-param">remove_special=True</em>, <em class="sig-param">trim=True</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence.convert_ids_to_tokens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence.convert_ids_to_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of ids to list of tokens.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>List[int]</em>) – The ids to be converted.</p></li>
<li><p><strong>remove_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, detect and try to do a reverse operation of <code class="docutils literal notranslate"><span class="pre">add_special</span></code> in <a class="reference internal" href="#cotk.dataloader.Sentence.convert_tokens_to_ids" title="cotk.dataloader.Sentence.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a>.
It will not remove <code class="docutils literal notranslate"><span class="pre">unk</span></code> or special tokens in the middle of sentences.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>trim</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use <a class="reference internal" href="#cotk.dataloader.Sentence.trim_in_ids" title="cotk.dataloader.Sentence.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a> to remove trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code> and <code class="docutils literal notranslate"><span class="pre">eos</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.convert_sentence_to_ids">
<code class="sig-name descname">convert_sentence_to_ids</code><span class="sig-paren">(</span><em class="sig-param">sentence</em>, <em class="sig-param">add_special=False</em>, <em class="sig-param">only_frequent_word=False</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence.convert_sentence_to_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence.convert_sentence_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a sentence to a list of ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sentence</strong> (<em>str</em>) – The sentence to be converted.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.convert_ids_to_sentence">
<code class="sig-name descname">convert_ids_to_sentence</code><span class="sig-paren">(</span><em class="sig-param">ids</em>, <em class="sig-param">remove_special=True</em>, <em class="sig-param">trim=True</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence.convert_ids_to_sentence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence.convert_ids_to_sentence" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of tokens to a sentence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>List[int]</em>) – The ids to be converted.</p></li>
<li><p><strong>remove_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, detect and try to do a reverse operation of <code class="docutils literal notranslate"><span class="pre">add_special</span></code> in <a class="reference internal" href="#cotk.dataloader.Sentence.convert_tokens_to_ids" title="cotk.dataloader.Sentence.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a>.
It will not remove <code class="docutils literal notranslate"><span class="pre">unk</span></code> or special tokens in the middle of sentences.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>trim</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use <a class="reference internal" href="#cotk.dataloader.Sentence.trim_in_ids" title="cotk.dataloader.Sentence.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a> to remove trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code> and <code class="docutils literal notranslate"><span class="pre">eos</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.add_special_to_ids">
<code class="sig-name descname">add_special_to_ids</code><span class="sig-paren">(</span><em class="sig-param">ids</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence.add_special_to_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence.add_special_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Add special tokens, such as <code class="docutils literal notranslate"><span class="pre">go_id</span></code> or <code class="docutils literal notranslate"><span class="pre">eos_id</span></code> to the input <code class="docutils literal notranslate"><span class="pre">ids</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ids</strong> (<em>List[int]</em>) – The input ids.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.remove_special_in_ids">
<code class="sig-name descname">remove_special_in_ids</code><span class="sig-paren">(</span><em class="sig-param">ids</em>, <em class="sig-param">remove_special=True</em>, <em class="sig-param">trim=True</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence.remove_special_in_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence.remove_special_in_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove special ids in input <cite>ids</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>List[int]</em>) – Input ids.</p></li>
<li><p><strong>remove_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, detect and try to do a reverse operation of <code class="docutils literal notranslate"><span class="pre">add_special</span></code> in <a class="reference internal" href="#cotk.dataloader.Sentence.convert_tokens_to_ids" title="cotk.dataloader.Sentence.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a>.
It will not remove <code class="docutils literal notranslate"><span class="pre">unk</span></code> or special tokens in the middle of sentences.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>trim</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use <a class="reference internal" href="#cotk.dataloader.Sentence.trim_in_ids" title="cotk.dataloader.Sentence.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a> to remove trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code> and <code class="docutils literal notranslate"><span class="pre">eos</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.trim_in_ids">
<code class="sig-name descname">trim_in_ids</code><span class="sig-paren">(</span><em class="sig-param">ids</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence.trim_in_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence.trim_in_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the first special token indicating the sentence is over and remove all the tokens after it (included).
Then remove all trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ids</strong> (<em>List[int]</em>) – The input ids.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.process_sentences">
<code class="sig-name descname">process_sentences</code><span class="sig-paren">(</span><em class="sig-param">sentences</em>, <em class="sig-param">add_special=True</em>, <em class="sig-param">only_frequent_word=False</em>, <em class="sig-param">cut=True</em><span class="sig-paren">)</span> &#x2192; List[List[int]]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Sentence.process_sentences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Sentence.process_sentences" title="Permalink to this definition">¶</a></dt>
<dd><p>Process input sentences.</p>
<ul class="simple">
<li><p>If sentences haven’t been tokenized, tokenize them by invoking <a class="reference internal" href="#cotk.dataloader.Sentence.tokenize_sentences" title="cotk.dataloader.Sentence.tokenize_sentences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sentence.tokenize_sentences()</span></code></a>.</p></li>
<li><p>Then, convert the list of tokens to a list of ids.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">self.max_sent_length</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">cut</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>,
sentences, whose length are more than <code class="docutils literal notranslate"><span class="pre">self.max_sent_length</span></code>, are
shorten to first <code class="docutils literal notranslate"><span class="pre">self.max_sent_length</span></code> tokens.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sentences</strong> (<em>List[str], List[List[str]]</em>) – <cite>sentences</cite> can be a list of sentences or a list of lists of tokens.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>cut</strong> (<em>bool, optional</em>) – Whether to cut sentences with too many tokens. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Sentence.frequent_vocab_size">
<code class="sig-name descname">frequent_vocab_size</code><a class="headerlink" href="#cotk.dataloader.Sentence.frequent_vocab_size" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The number of <strong>frequent</strong> words. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,      from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Sentence.all_vocab_size">
<code class="sig-name descname">all_vocab_size</code><a class="headerlink" href="#cotk.dataloader.Sentence.all_vocab_size" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The number of frequent words and rare words. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,       from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Sentence.frequent_vocab_list">
<code class="sig-name descname">frequent_vocab_list</code><a class="headerlink" href="#cotk.dataloader.Sentence.frequent_vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – The list of frequent words. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,       from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Sentence.all_vocab_list">
<code class="sig-name descname">all_vocab_list</code><a class="headerlink" href="#cotk.dataloader.Sentence.all_vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – The list of frequent words and rare words. Frequent words are always in the front of the list. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,        from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.get_special_tokens_mapping">
<code class="sig-name descname">get_special_tokens_mapping</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; MutableMapping[str, str]<a class="headerlink" href="#cotk.dataloader.Sentence.get_special_tokens_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Get special tokens mapping. Special tokens mapping is an ordered dict       mapping the general name of special tokens to its string.       The key must be one of the following:       <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.      The value can be arbitrary string, e.g., <code class="docutils literal notranslate"><span class="pre">&quot;&lt;pad&gt;&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;&lt;unk&gt;&quot;</span></code>. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,      from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Sentence.get_special_tokens_id">
<code class="sig-name descname">get_special_tokens_id</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#cotk.dataloader.Sentence.get_special_tokens_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get id of special token specifying the general name.
Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no such token in this instance. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,       from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – the general name, must be one of the following,
<code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Sentence.pad_id">
<code class="sig-name descname">pad_id</code><a class="headerlink" href="#cotk.dataloader.Sentence.pad_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of pad token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no pad token in this instance. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,      from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Sentence.unk_id">
<code class="sig-name descname">unk_id</code><a class="headerlink" href="#cotk.dataloader.Sentence.unk_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of unk token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no unk token in this instance. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,      from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Sentence.go_id">
<code class="sig-name descname">go_id</code><a class="headerlink" href="#cotk.dataloader.Sentence.go_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of go token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no go token in this instance. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,        from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Sentence.eos_id">
<code class="sig-name descname">eos_id</code><a class="headerlink" href="#cotk.dataloader.Sentence.eos_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of eos token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no eos token in this instance. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,      from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

</dd></dl>

<div class="section" id="sentencedefault">
<h4>SentenceDefault<a class="headerlink" href="#sentencedefault" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="cotk.dataloader.SentenceDefault">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SentenceDefault</code><span class="sig-paren">(</span><em class="sig-param">tokenizer=None</em>, <em class="sig-param">vocab=None</em>, <em class="sig-param">vocab_from_mappings=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#SentenceDefault"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SentenceDefault" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Sentence</span></code></a>, <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Field</span></code></a></p>
<p>A common use field for sentence.</p>
<p>If any argument is not specified,
the value will be first retrieved from <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a>. If still <code class="docutils literal notranslate"><span class="pre">None</span></code>, default
value will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>, optional) – The vocabulary used for this field. Sharing this object between fields can
build vocabulary together.  No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab_from_mappings</strong> (<em>Dict[str, str], optional</em>) – Infer the set type (train, test, or extra) from the set name.
For example, <code class="docutils literal notranslate"><span class="pre">DEFAULT_VOCAB_FROM_MAPPINGS[&quot;dev&quot;]</span> <span class="pre">==</span> <span class="pre">&quot;test&quot;</span></code> means that the words from the “dev” set
is used for test. Default: See <a class="reference internal" href="#vocab-from-ref"><span class="std std-ref">the table</span></a> for default value.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Input Formats</dt><dd><p>This field read one line of sentence per sample.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.SentenceDefault.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">data</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/field.html#SentenceDefault.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SentenceDefault.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoked by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a>, return the batched data specified by this field.
This function is for INTERNAL USE only, but it shows the data format of the returned batch.</p>
<p>The function will return a dict, containing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size,</span> <span class="pre">max_sent_length_in_batch]</span></code>):
Padded sentences in id formats. It only contains frequent vocabs, and rare words are replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_allvocabs</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size,</span> <span class="pre">max_sent_length_in_batch]</span></code>):
Padded sentences in id formats. It contains frequent vocabs and rare vocabs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_length</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size]</span></code>): The length of sentences.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_str</span></code> (<code class="docutils literal notranslate"><span class="pre">List[str]</span></code>): The raw sentences.</p></li>
</ul>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> is the name of the field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code> is <code class="docutils literal notranslate"><span class="pre">len(indexes)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_sent_length_in_batch</span></code> is the maximum length of sentences in the batch.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the field.</p></li>
<li><p><strong>data</strong> (<em>Any</em>) – the data stored in dataloader.</p></li>
<li><p><strong>indexes</strong> (<em>List[int]</em>) – the indexes of the data in this batch</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#   all_vocab_list = [&quot;&lt;pad&gt;&quot;, &quot;&lt;unk&gt;&quot;, &quot;&lt;go&gt;&quot;, &quot;&lt;eos&gt;&quot;, &quot;Life&quot;, &quot;is&quot;, &quot;short&quot;, &quot;.&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#       &quot;PHP&quot;, &quot;the&quot;, &quot;best&quot;, &quot;language&quot;, &quot;in&quot;, &quot;world&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   frequent_vocab_size = 11</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   frequent_vocab_list = [&quot;&lt;pad&gt;&quot;, &quot;&lt;unk&gt;&quot;, &quot;&lt;go&gt;&quot;, &quot;&lt;eos&gt;&quot;, &quot;Life&quot;, &quot;is&quot;, &quot;short&quot;, &quot;.&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#       &quot;PHP&quot;, &quot;the&quot;, &quot;best&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;sent&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="go">{</span>
<span class="go">    &quot;sent&quot;: numpy.array([</span>
<span class="go">        [2, 4, 5, 6, 7, 3, 0, 0, 0, 0, 0],    # &lt;go&gt; Life is short . &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">        [2, 8, 5, 9, 10, 1, 1, 9, 1, 7, 3],  # &lt;go&gt; PHP is the best &lt;unk&gt; &lt;unk&gt; the &lt;unk&gt; . &lt;eos&gt;</span>
<span class="go">    ]),</span>
<span class="go">    &quot;sent_length&quot;: numpy.array([6, 11]), # length of sentences</span>
<span class="go">    &quot;sent_allvocabs&quot;: numpy.array([</span>
<span class="go">        [2, 4, 5, 6, 7, 3, 0, 0, 0, 0, 0],    # &lt;go&gt; Life is short . &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">        [2, 8, 5, 9, 10, 11, 12, 9, 13, 7, 3],  # &lt;go&gt; PHP is the best language in the world . &lt;eos&gt;</span>
<span class="go">    ]),</span>
<span class="go">    &quot;sent_str&quot;: [</span>
<span class="go">        &quot;Life is short.&quot;,</span>
<span class="go">        &quot;PHP is the best language in the world.&quot;,</span>
<span class="go">    ],</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sentencegpt2">
<h4>SentenceGPT2<a class="headerlink" href="#sentencegpt2" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="cotk.dataloader.SentenceGPT2">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SentenceGPT2</code><span class="sig-paren">(</span><em class="sig-param">tokenizer=None</em>, <em class="sig-param">vocab=None</em>, <em class="sig-param">vocab_from_mappings=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#SentenceGPT2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SentenceGPT2" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Sentence</span></code></a>, <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Field</span></code></a></p>
<p>A field for sentence in the format of GPT2.</p>
<p>If any argument is not specified,
the value will be first retrieved from <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a>. If still <code class="docutils literal notranslate"><span class="pre">None</span></code>, default
value will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>, optional) – The vocabulary used for this field. Sharing this object between fields can
build vocabulary together.  No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab_from_mappings</strong> (<em>Dict[str, str], optional</em>) – Infer the set type (train, test, or extra) from the set name.
For example, <code class="docutils literal notranslate"><span class="pre">DEFAULT_VOCAB_FROM_MAPPINGS[&quot;dev&quot;]</span> <span class="pre">==</span> <span class="pre">&quot;test&quot;</span></code> means that the words from the “dev” set
is used for test. Default: See <a class="reference internal" href="#vocab-from-ref"><span class="std std-ref">the table</span></a> for default value.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Input Formats</dt><dd><p>This field read one line of sentence per sample.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.SentenceGPT2.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">data</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/field.html#SentenceGPT2.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SentenceGPT2.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoked by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a>, return the batched data specified by this field.
This function is for INTERNAL USE only, but it shows the data format of the returned batch.</p>
<p>The function will return a dict, containing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size,</span> <span class="pre">max_sent_length_in_batch]</span></code>):
Padded sentences in id formats. It only contains frequent vocabs, and rare words are replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_allvocabs</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size,</span> <span class="pre">max_sent_length_in_batch]</span></code>):
Padded sentences in id formats. It contains frequent vocabs and rare vocabs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_length</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size]</span></code>): The length of sentences.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_str</span></code> (<code class="docutils literal notranslate"><span class="pre">List[str]</span></code>): The raw sentences.</p></li>
</ul>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> is the name of the field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code> is <code class="docutils literal notranslate"><span class="pre">len(indexes)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_sent_length_in_batch</span></code> is the maximum length of sentences in the batch.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the field.</p></li>
<li><p><strong>data</strong> (<em>Any</em>) – the data stored in dataloader.</p></li>
<li><p><strong>indexes</strong> (<em>List[int]</em>) – the indexes of the data in this batch</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># This example is based on GPT2Tokenizer. The vocab files are in ./tests/dummy_gpt2vocab.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># field.eos_id = 413 # &lt;|endoftext|&gt;, also used for &lt;pad&gt;, &lt;unk&gt;, &lt;go&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;sent&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">{</span>
<span class="go">    &quot;sent&quot;: numpy.array([</span>
<span class="go">        [413, 6, 134, 321, 407, 107, 157, 121, 372, 201, 402, 105, 413, 413, 413, 413],</span>
<span class="go">            # [&#39;&lt;|endoftext|&gt;&#39;, &#39;A&#39;, &#39;Ġbicycle&#39;, &#39;Ġreplica&#39;, &#39;Ġwith&#39;, &#39;Ġa&#39;, &#39;Ġclock&#39;, &#39;Ġas&#39;, &#39;Ġthe&#39;,</span>
<span class="go">            #   &#39;Ġfront&#39;, &#39;Ġwheel&#39;, &#39;Ġ.&#39;, &#39;&lt;|endoftext|&gt;&#39;, &#39;&lt;|endoftext|&gt;&#39;, &#39;&lt;|endoftext|&gt;&#39;, &#39;&lt;|endoftext|&gt;&#39;]</span>
<span class="go">        [413, 6, 149, 370, 330, 384, 126, 298, 236, 130, 107, 255, 298, 149, 105, 413],</span>
<span class="go">            # [&#39;&lt;|endoftext|&gt;&#39;, &#39;A&#39;, &#39;Ġcar&#39;, &#39;Ġthat&#39;, &#39;Ġseems&#39;, &#39;Ġto&#39;, &#39;Ġbe&#39;, &#39;Ġparked&#39;, &#39;Ġillegally&#39;,</span>
<span class="go">            #   &#39;Ġbehind&#39;, &#39;Ġa&#39;, &#39;Ġlegally&#39;, &#39;Ġparked&#39;, &#39;Ġcar&#39;, &#39;Ġ.&#39;, &#39;&lt;|endoftext|&gt;&#39;]</span>
<span class="go">    ]),</span>
<span class="go">    &quot;sent_length&quot;: numpy.array([13, 16]), # length of sentences</span>
<span class="go">    &quot;sent_allvocabs&quot;: numpy.array([</span>
<span class="go">        [413, 6, 134, 321, 407, 107, 157, 121, 372, 201, 402, 105, 413, 413, 413, 413],</span>
<span class="go">            # [&#39;&lt;|endoftext|&gt;&#39;, &#39;A&#39;, &#39;Ġbicycle&#39;, &#39;Ġreplica&#39;, &#39;Ġwith&#39;, &#39;Ġa&#39;, &#39;Ġclock&#39;, &#39;Ġas&#39;, &#39;Ġthe&#39;,</span>
<span class="go">            #   &#39;Ġfront&#39;, &#39;Ġwheel&#39;, &#39;Ġ.&#39;, &#39;&lt;|endoftext|&gt;&#39;, &#39;&lt;|endoftext|&gt;&#39;, &#39;&lt;|endoftext|&gt;&#39;, &#39;&lt;|endoftext|&gt;&#39;]</span>
<span class="go">        [413, 6, 149, 370, 330, 384, 126, 298, 236, 130, 107, 255, 298, 149, 105, 413],</span>
<span class="go">            # [&#39;&lt;|endoftext|&gt;&#39;, &#39;A&#39;, &#39;Ġcar&#39;, &#39;Ġthat&#39;, &#39;Ġseems&#39;, &#39;Ġto&#39;, &#39;Ġbe&#39;, &#39;Ġparked&#39;, &#39;Ġillegally&#39;,</span>
<span class="go">            #   &#39;Ġbehind&#39;, &#39;Ġa&#39;, &#39;Ġlegally&#39;, &#39;Ġparked&#39;, &#39;Ġcar&#39;, &#39;Ġ.&#39;, &#39;&lt;|endoftext|&gt;&#39;]</span>
<span class="go">    ]),</span>
<span class="go">    &quot;sent_str&quot;: [</span>
<span class="go">        &quot;A bicycle replica with a clock as the front wheel .&quot;,</span>
<span class="go">        &quot;A car that seems to be parked illegally behind a legally parked car .&quot;,</span>
<span class="go">    ],</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sentencebert">
<h4>SentenceBERT<a class="headerlink" href="#sentencebert" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="cotk.dataloader.SentenceBERT">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SentenceBERT</code><span class="sig-paren">(</span><em class="sig-param">tokenizer=None</em>, <em class="sig-param">vocab=None</em>, <em class="sig-param">vocab_from_mappings=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#SentenceBERT"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SentenceBERT" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Sentence" title="cotk.dataloader.Sentence"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Sentence</span></code></a>, <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Field</span></code></a></p>
<p>A field for sentence in the format of BERT.</p>
<p>If any argument is not specified,
the value will be first retrieved from <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a>. If still <code class="docutils literal notranslate"><span class="pre">None</span></code>, default
value will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>, optional) – The vocabulary used for this field. Sharing this object between fields can
build vocabulary together.  No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab_from_mappings</strong> (<em>Dict[str, str], optional</em>) – Infer the set type (train, test, or extra) from the set name.
For example, <code class="docutils literal notranslate"><span class="pre">DEFAULT_VOCAB_FROM_MAPPINGS[&quot;dev&quot;]</span> <span class="pre">==</span> <span class="pre">&quot;test&quot;</span></code> means that the words from the “dev” set
is used for test. Default: See <a class="reference internal" href="#vocab-from-ref"><span class="std std-ref">the table</span></a> for default value.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Input Formats</dt><dd><p>This field read one line of sentence per sample.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.SentenceBERT.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">data</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/field.html#SentenceBERT.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SentenceBERT.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoked by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a>, return the batched data specified by this field.
This function is for INTERNAL USE only, but it shows the data format of the returned batch.</p>
<p>The function will return a dict, containing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size,</span> <span class="pre">max_sent_length_in_batch]</span></code>):
Padded sentences in id formats. It only contains frequent vocabs, and rare words are replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_allvocabs</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size,</span> <span class="pre">max_sent_length_in_batch]</span></code>):
Padded sentences in id formats. It contains frequent vocabs and rare vocabs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_length</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size]</span></code>): The length of sentences.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_str</span></code> (<code class="docutils literal notranslate"><span class="pre">List[str]</span></code>): The raw sentences.</p></li>
</ul>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> is the name of the field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code> is <code class="docutils literal notranslate"><span class="pre">len(indexes)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_sent_length_in_batch</span></code> is the maximum length of sentences in the batch.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the field.</p></li>
<li><p><strong>data</strong> (<em>Any</em>) – the data stored in dataloader.</p></li>
<li><p><strong>indexes</strong> (<em>List[int]</em>) – the indexes of the data in this batch</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># This example is based on BertTokenizer. The vocab files are in ./tests/dummy_bertvocab.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;sent&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="go">{</span>
<span class="go">    &quot;sent&quot;: numpy.array([</span>
<span class="go">        [101, 147,  37,  29, 359, 102,   0,   0,   0,   0,   0,   0,   0],</span>
<span class="go">            # [&#39;&lt;cls&gt;&#39;, &#39;How&#39;, &#39;are&#39;, &#39;you&#39;, &#39;?&#39;, &#39;&lt;sep&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;]</span>
<span class="go">    [101, 375, 334, 379, 127, 341, 350,  29, 328,   9,  29, 359, 102]</span>
<span class="go">            # [&#39;&lt;cls&gt;&#39;, &#39;i&#39;, &#39;&#39;&#39;, &#39;m&#39;, &#39;fine&#39;, &#39;.&#39;,  &#39;thank&#39;, &#39;you&#39;, &#39;!&#39;, &#39;and&#39;, &#39;you&#39;, &#39;?&#39;, &#39;&lt;sep&gt;&#39;]</span>
<span class="go">    ]),</span>
<span class="go">    &quot;sent_length&quot;: numpy.array([6, 13]), # length of sentences,</span>
<span class="go">    &quot;sent_allvocabs&quot;: numpy.array([</span>
<span class="go">        [101, 147,  37,  29, 359, 102,   0,   0,   0,   0,   0,   0,   0],</span>
<span class="go">            # [&#39;&lt;cls&gt;&#39;, &#39;how&#39;, &#39;are&#39;, &#39;you&#39;, &#39;?&#39;, &#39;&lt;sep&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;, &#39;&lt;pad&gt;&#39;]</span>
<span class="go">    [101, 375, 334, 379, 127, 341, 350,  29, 328,   9,  29, 359, 102]</span>
<span class="go">            # [&#39;&lt;cls&gt;&#39;, &#39;i&#39;, &#39;&#39;&#39;, &#39;m&#39;, &#39;fine&#39;, &#39;.&#39;,  &#39;thank&#39;, &#39;you&#39;, &#39;!&#39;, &#39;and&#39;, &#39;you&#39;, &#39;?&#39;, &#39;&lt;sep&gt;&#39;]</span>
<span class="go">    ]),</span>
<span class="go">    &quot;sent_str&quot;: [</span>
<span class="go">        &quot;How are you?&quot;,</span>
<span class="go">        &quot;I&#39;m fine. Thank you! And you?&quot;</span>
<span class="go">    ],</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="session">
<h3>Session<a class="headerlink" href="#session" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.Session">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">Session</code><span class="sig-paren">(</span><em class="sig-param">tokenizer=None</em>, <em class="sig-param">vocab=None</em>, <em class="sig-param">vocab_from_mappings=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em>, <em class="sig-param">max_turn_length=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#Session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Session" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Field</span></code></a></p>
<p>A field for session. Each session is a list of sentences.</p>
<p>If any argument is not specified,
the value will be first retrieved from <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a>. If still <code class="docutils literal notranslate"><span class="pre">None</span></code>, default
value will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>, optional) – The vocabulary used for this field. Sharing this object between fields can
build vocabulary together.  No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab_from_mappings</strong> (<em>Dict[str, str], optional</em>) – Infer the set type (train, test, or extra) from the set name.
For example, <code class="docutils literal notranslate"><span class="pre">DEFAULT_VOCAB_FROM_MAPPINGS[&quot;dev&quot;]</span> <span class="pre">==</span> <span class="pre">&quot;test&quot;</span></code> means that the words from the “dev” set
is used for test. Default: See <a class="reference internal" href="#vocab-from-ref"><span class="std std-ref">the table</span></a> for default value.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>max_turn_length</strong> (<em>int, _InfiniteLength, optional</em>) – Set the maximum turn length of a session.
If it’s an integer, any session, whose turn length is more than <code class="docutils literal notranslate"><span class="pre">max_turn_length</span></code> is shortened to
first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> turns. The left turns are ignored.
If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sessions won’t be shortened and all turns are remained.
Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Input Format</dt><dd><p>This field read multiple line of sentences per sample, until a blank line.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.Session.tokenize">
<code class="sig-name descname">tokenize</code><span class="sig-paren">(</span><em class="sig-param">sentence</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="headerlink" href="#cotk.dataloader.Session.tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize <code class="docutils literal notranslate"><span class="pre">sentence</span></code>.</p>
<ul class="simple">
<li><p>Convert tokens to lower case if <code class="docutils literal notranslate"><span class="pre">self.convert_to_lower_letter</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sentence</strong> (<em>str</em>) – The sentence to be tokenized.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.tokenize_sentences">
<code class="sig-name descname">tokenize_sentences</code><span class="sig-paren">(</span><em class="sig-param">sentences</em><span class="sig-paren">)</span> &#x2192; List[List[str]]<a class="headerlink" href="#cotk.dataloader.Session.tokenize_sentences" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize <code class="docutils literal notranslate"><span class="pre">sentences</span></code>.</p>
<ul class="simple">
<li><p>Convert tokens to lower case if <code class="docutils literal notranslate"><span class="pre">self.convert_to_lower_letter</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sentences</strong> (<em>List[str]</em>) – The list of sentence to be tokenized.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.tokenize_sessions">
<code class="sig-name descname">tokenize_sessions</code><span class="sig-paren">(</span><em class="sig-param">sessions</em><span class="sig-paren">)</span> &#x2192; List[List[List[str]]]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Session.tokenize_sessions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Session.tokenize_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize <code class="docutils literal notranslate"><span class="pre">sessions</span></code>.</p>
<ul class="simple">
<li><p>Convert the tokens to lower case if <code class="docutils literal notranslate"><span class="pre">self.convert_to_lower_letter</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sessions</strong> (<em>List[List[str]]</em>) – The list of sessions to be tokenized.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.convert_tokens_to_ids">
<code class="sig-name descname">convert_tokens_to_ids</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">add_special=False</em>, <em class="sig-param">only_frequent_word=False</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="headerlink" href="#cotk.dataloader.Session.convert_tokens_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of tokens to list of ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokens</strong> (<em>List[str]</em>) – The tokens to be converted.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.convert_ids_to_tokens">
<code class="sig-name descname">convert_ids_to_tokens</code><span class="sig-paren">(</span><em class="sig-param">ids</em>, <em class="sig-param">remove_special=True</em>, <em class="sig-param">trim=True</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="headerlink" href="#cotk.dataloader.Session.convert_ids_to_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of ids to list of tokens.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>List[int]</em>) – The ids to be converted.</p></li>
<li><p><strong>remove_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, detect and try to do a reverse operation of <code class="docutils literal notranslate"><span class="pre">add_special</span></code> in <a class="reference internal" href="#cotk.dataloader.Session.convert_tokens_to_ids" title="cotk.dataloader.Session.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a>.
It will not remove <code class="docutils literal notranslate"><span class="pre">unk</span></code> or special tokens in the middle of sentences.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>trim</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use <a class="reference internal" href="#cotk.dataloader.Session.trim_in_ids" title="cotk.dataloader.Session.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a> to remove trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code> and <code class="docutils literal notranslate"><span class="pre">eos</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.convert_sentence_to_ids">
<code class="sig-name descname">convert_sentence_to_ids</code><span class="sig-paren">(</span><em class="sig-param">sentence</em>, <em class="sig-param">add_special=False</em>, <em class="sig-param">only_frequent_word=False</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="headerlink" href="#cotk.dataloader.Session.convert_sentence_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a sentence to a list of ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sentence</strong> (<em>str</em>) – The sentence to be converted.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.convert_ids_to_sentence">
<code class="sig-name descname">convert_ids_to_sentence</code><span class="sig-paren">(</span><em class="sig-param">ids</em>, <em class="sig-param">remove_special=True</em>, <em class="sig-param">trim=True</em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#cotk.dataloader.Session.convert_ids_to_sentence" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of tokens to a sentence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>List[int]</em>) – The ids to be converted.</p></li>
<li><p><strong>remove_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, detect and try to do a reverse operation of <code class="docutils literal notranslate"><span class="pre">add_special</span></code> in <a class="reference internal" href="#cotk.dataloader.Session.convert_tokens_to_ids" title="cotk.dataloader.Session.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a>.
It will not remove <code class="docutils literal notranslate"><span class="pre">unk</span></code> or special tokens in the middle of sentences.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>trim</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use <a class="reference internal" href="#cotk.dataloader.Session.trim_in_ids" title="cotk.dataloader.Session.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a> to remove trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code> and <code class="docutils literal notranslate"><span class="pre">eos</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.convert_multi_turn_tokens_to_ids">
<code class="sig-name descname">convert_multi_turn_tokens_to_ids</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">add_special=False</em>, <em class="sig-param">only_frequent_word=False</em><span class="sig-paren">)</span> &#x2192; List[List[int]]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Session.convert_multi_turn_tokens_to_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Session.convert_multi_turn_tokens_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of tokenized sentences to list of sentence ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<em>List[List[str]]</em>) – The tokenized sentences to be converted.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.convert_multi_turn_ids_to_tokens">
<code class="sig-name descname">convert_multi_turn_ids_to_tokens</code><span class="sig-paren">(</span><em class="sig-param">session_ids</em>, <em class="sig-param">remove_special=True</em>, <em class="sig-param">trim=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#Session.convert_multi_turn_ids_to_tokens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Session.convert_multi_turn_ids_to_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of sentence ids to list of sentences.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session_ids</strong> (<em>List[List[int]]</em>) – The sentence ids to be converted.</p></li>
<li><p><strong>remove_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, detect and try to do a reverse operation of <code class="docutils literal notranslate"><span class="pre">add_special</span></code> in <a class="reference internal" href="#cotk.dataloader.Session.convert_tokens_to_ids" title="cotk.dataloader.Session.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a>.
It will not remove <code class="docutils literal notranslate"><span class="pre">unk</span></code> or special tokens in the middle of sentences.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>trim</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use <a class="reference internal" href="#cotk.dataloader.Session.trim_in_ids" title="cotk.dataloader.Session.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a> to remove trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code> and <code class="docutils literal notranslate"><span class="pre">eos</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.add_special_to_ids">
<code class="sig-name descname">add_special_to_ids</code><span class="sig-paren">(</span><em class="sig-param">ids</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="headerlink" href="#cotk.dataloader.Session.add_special_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Add special tokens, such as <code class="docutils literal notranslate"><span class="pre">go_id</span></code> or <code class="docutils literal notranslate"><span class="pre">eos_id</span></code> to the input <code class="docutils literal notranslate"><span class="pre">ids</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ids</strong> (<em>List[int]</em>) – The input ids.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.remove_special_in_ids">
<code class="sig-name descname">remove_special_in_ids</code><span class="sig-paren">(</span><em class="sig-param">ids</em>, <em class="sig-param">remove_special=True</em>, <em class="sig-param">trim=True</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="headerlink" href="#cotk.dataloader.Session.remove_special_in_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove special ids in input <cite>ids</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>List[int]</em>) – Input ids.</p></li>
<li><p><strong>remove_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, detect and try to do a reverse operation of <code class="docutils literal notranslate"><span class="pre">add_special</span></code> in <a class="reference internal" href="#cotk.dataloader.Session.convert_tokens_to_ids" title="cotk.dataloader.Session.convert_tokens_to_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_tokens_to_ids()</span></code></a>.
It will not remove <code class="docutils literal notranslate"><span class="pre">unk</span></code> or special tokens in the middle of sentences.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>trim</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use <a class="reference internal" href="#cotk.dataloader.Session.trim_in_ids" title="cotk.dataloader.Session.trim_in_ids"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trim_in_ids()</span></code></a> to remove trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code> and <code class="docutils literal notranslate"><span class="pre">eos</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.trim_in_ids">
<code class="sig-name descname">trim_in_ids</code><span class="sig-paren">(</span><em class="sig-param">ids</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="headerlink" href="#cotk.dataloader.Session.trim_in_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the first special token indicating the sentence is over and remove all the tokens after it (included).
Then remove all trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ids</strong> (<em>List[int]</em>) – The input ids.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.multi_turn_trim_in_ids">
<code class="sig-name descname">multi_turn_trim_in_ids</code><span class="sig-paren">(</span><em class="sig-param">session_ids</em><span class="sig-paren">)</span> &#x2192; List[List[int]]<a class="reference internal" href="_modules/cotk/dataloader/field.html#Session.multi_turn_trim_in_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Session.multi_turn_trim_in_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>For each sentence ids in session,
find the first special token indicating the sentence is over and remove all the tokens after it (included).
Then remove all trailing <code class="docutils literal notranslate"><span class="pre">pad</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>session_ids</strong> (<em>List[List[int]]</em>) – The input ids of session.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.process_sentences">
<code class="sig-name descname">process_sentences</code><span class="sig-paren">(</span><em class="sig-param">sentences</em>, <em class="sig-param">add_special=True</em>, <em class="sig-param">only_frequent_word=False</em>, <em class="sig-param">cut=True</em><span class="sig-paren">)</span> &#x2192; List[List[int]]<a class="headerlink" href="#cotk.dataloader.Session.process_sentences" title="Permalink to this definition">¶</a></dt>
<dd><p>Process input sentences.</p>
<ul class="simple">
<li><p>If sentences haven’t been tokenized, tokenize them by invoking <a class="reference internal" href="#cotk.dataloader.Sentence.tokenize_sentences" title="cotk.dataloader.Sentence.tokenize_sentences"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sentence.tokenize_sentences()</span></code></a>.</p></li>
<li><p>Then, convert the list of tokens to a list of ids.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">self.max_sent_length</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">cut</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>,
sentences, whose length are more than <code class="docutils literal notranslate"><span class="pre">self.max_sent_length</span></code>, are
shorten to first <code class="docutils literal notranslate"><span class="pre">self.max_sent_length</span></code> tokens.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sentences</strong> (<em>List[str], List[List[str]]</em>) – <cite>sentences</cite> can be a list of sentences or a list of lists of tokens.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>cut</strong> (<em>bool, optional</em>) – Whether to cut sentences with too many tokens. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.process_sessions">
<code class="sig-name descname">process_sessions</code><span class="sig-paren">(</span><em class="sig-param">sessions</em>, <em class="sig-param">add_special=True</em>, <em class="sig-param">only_frequent_word=False</em>, <em class="sig-param">cut=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#Session.process_sessions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Session.process_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Process input sessions.</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">self.max_turn_length</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">cut</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>,
sessions, whose length are more than <code class="docutils literal notranslate"><span class="pre">self.max_turn_length</span></code>, are
shorten to first <code class="docutils literal notranslate"><span class="pre">self.max_turn_length</span></code> sentences.</p></li>
<li><p>If sessions haven’t been tokenized, tokenize them by invoking <code class="xref py py-meth docutils literal notranslate"><span class="pre">self.tokenize_sessions()</span></code></p></li>
<li><p>Then, convert the list of tokens to a list of ids.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">self.max_sent_length</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">cut</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>,
sentences, whose length are more than <code class="docutils literal notranslate"><span class="pre">self.max_sent_length</span></code>, are
shorten to first <code class="docutils literal notranslate"><span class="pre">self.max_sent_length</span></code> tokens.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sessions</strong> (<em>List[List[str], List[List[str]]]</em>) – sentences in a session can be a str or a list of tokens.</p></li>
<li><p><strong>add_special</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, special tokens (e.g. <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>) are added. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, rare vocabs will be replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>cut</strong> (<em>bool, optional</em>) – Whether to cut sessions/sentences with too many sentences/tokens. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Session.frequent_vocab_size">
<code class="sig-name descname">frequent_vocab_size</code><a class="headerlink" href="#cotk.dataloader.Session.frequent_vocab_size" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The number of <strong>frequent</strong> words. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,      from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Session.all_vocab_size">
<code class="sig-name descname">all_vocab_size</code><a class="headerlink" href="#cotk.dataloader.Session.all_vocab_size" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The number of frequent words and rare words. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,       from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Session.frequent_vocab_list">
<code class="sig-name descname">frequent_vocab_list</code><a class="headerlink" href="#cotk.dataloader.Session.frequent_vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – The list of frequent words. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,       from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Session.all_vocab_list">
<code class="sig-name descname">all_vocab_list</code><a class="headerlink" href="#cotk.dataloader.Session.all_vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – The list of frequent words and rare words. Frequent words are always in the front of the list. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,        from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.get_special_tokens_mapping">
<code class="sig-name descname">get_special_tokens_mapping</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; MutableMapping[str, str]<a class="headerlink" href="#cotk.dataloader.Session.get_special_tokens_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Get special tokens mapping. Special tokens mapping is an ordered dict       mapping the general name of special tokens to its string.       The key must be one of the following:       <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.      The value can be arbitrary string, e.g., <code class="docutils literal notranslate"><span class="pre">&quot;&lt;pad&gt;&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;&lt;unk&gt;&quot;</span></code>. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,      from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Session.get_special_tokens_id">
<code class="sig-name descname">get_special_tokens_id</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#cotk.dataloader.Session.get_special_tokens_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get id of special token specifying the general name.
Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no such token in this instance. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,       from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – the general name, must be one of the following,
<code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Session.pad_id">
<code class="sig-name descname">pad_id</code><a class="headerlink" href="#cotk.dataloader.Session.pad_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of pad token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no pad token in this instance. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,      from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Session.unk_id">
<code class="sig-name descname">unk_id</code><a class="headerlink" href="#cotk.dataloader.Session.unk_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of unk token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no unk token in this instance. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,      from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Session.go_id">
<code class="sig-name descname">go_id</code><a class="headerlink" href="#cotk.dataloader.Session.go_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of go token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no go token in this instance. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,        from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Session.eos_id">
<code class="sig-name descname">eos_id</code><a class="headerlink" href="#cotk.dataloader.Session.eos_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of eos token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no eos token in this instance. It calls the method with the identical name of the <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a> instance,      from <code class="docutils literal notranslate"><span class="pre">self.get_vocab()</span></code>.</p>
</dd></dl>

</dd></dl>

<div class="section" id="sessiondefault">
<h4>SessionDefault<a class="headerlink" href="#sessiondefault" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="cotk.dataloader.SessionDefault">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SessionDefault</code><span class="sig-paren">(</span><em class="sig-param">tokenizer=None</em>, <em class="sig-param">vocab=None</em>, <em class="sig-param">vocab_from_mappings=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em>, <em class="sig-param">max_turn_length=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#SessionDefault"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SessionDefault" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Session" title="cotk.dataloader.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Session</span></code></a>, <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Field</span></code></a></p>
<p>A common use field for sessions.</p>
<p>If any argument is not specified,
the value will be first retrieved from <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a>. If still <code class="docutils literal notranslate"><span class="pre">None</span></code>, default
value will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>, optional) – The vocabulary used for this field. Sharing this object between fields can
build vocabulary together.  No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab_from_mappings</strong> (<em>Dict[str, str], optional</em>) – Infer the set type (train, test, or extra) from the set name.
For example, <code class="docutils literal notranslate"><span class="pre">DEFAULT_VOCAB_FROM_MAPPINGS[&quot;dev&quot;]</span> <span class="pre">==</span> <span class="pre">&quot;test&quot;</span></code> means that the words from the “dev” set
is used for test. Default: See <a class="reference internal" href="#vocab-from-ref"><span class="std std-ref">the table</span></a> for default value.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Input Format</dt><dd><p>This field read multiple line of sentences per sample, until a blank line.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.SessionDefault.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">data</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/field.html#SessionDefault.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SessionDefault.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Invoked by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a>, return the batched data specified by this field.</dt><dd><p>This function is for INTERNAL USE only, but it shows the data format of the returned batch.</p>
<p>The function will return a dict, containing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size,</span> <span class="pre">max_turn_length_in_batch,</span> <span class="pre">max_sent_length_in_batch]</span></code>):
Padded sessions in id formats. It only contains frequent vocabs, and rare words are replaced by <code class="docutils literal notranslate"><span class="pre">unk_id</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_allvocabs</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size,</span> <span class="pre">max_turn_length_in_batch,</span> <span class="pre">max_sent_length_in_batch]</span></code>):
Padded sessions in id formats. It contains frequent vocabs and rare vocabs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_turn_length</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size]</span></code>): The turn numbers of sessions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_sent_length</span></code> (<code class="docutils literal notranslate"><span class="pre">List[List[int]]</span></code>): The length of sentences of sessions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_str</span></code> (<code class="docutils literal notranslate"><span class="pre">List[str]</span></code>): The raw sessions.</p></li>
</ul>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> is the name of the field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code> is <code class="docutils literal notranslate"><span class="pre">len(indexes)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_turn_length_in_batch</span></code> is the maximum turn number of sessions in the batch.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_sent_length_in_batch</span></code> is the maximum length of sentences in the batch.</p></li>
</ul>
<dl class="simple">
<dt>Arguments:</dt><dd><p>name (str): name of the field.
data (Any): the data stored in dataloader.
indexes (List[int]): the indexes of the data in this batch</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#   dataset = iter([&#39;How are you?\n&#39;, &quot;I&#39;m fine. And you?\n&quot;, &quot;I&#39;m fine, too.\n&quot;, &quot;\n&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#       &quot;How to install cotk?\n&quot;, &quot;pip install cotk.\n&quot;, &quot;\n&quot;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   min_frequent_vocab_times = 2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   all_vocab_list = [&#39;&lt;pad&gt;&#39;, &#39;&lt;unk&gt;&#39;, &#39;&lt;go&gt;&#39;, &#39;&lt;eos&gt;&#39;, &#39;.&#39;, &#39;?&#39;, &quot;&#39;&quot;, &#39;How&#39;, &#39;I&#39;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#       &#39;cotk&#39;, &#39;fine&#39;, &#39;install&#39;, &#39;m&#39;, &#39;you&#39;, &#39;,&#39;, &#39;And&#39;, &#39;are&#39;, &#39;pip&#39;, &#39;to&#39;, &#39;too&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   frequent_vocab_size = 14</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   frequent_vocab_list = [&#39;&lt;pad&gt;&#39;, &#39;&lt;unk&gt;&#39;, &#39;&lt;go&gt;&#39;, &#39;&lt;eos&gt;&#39;, &#39;.&#39;, &#39;?&#39;, &quot;&#39;&quot;, &#39;How&#39;, &#39;I&#39;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#       &#39;cotk&#39;, &#39;fine&#39;, &#39;install&#39;, &#39;m&#39;, &#39;you&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   data = {</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#       &#39;id&#39;: [</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#           [</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#               [2, 7, 16, 13, 5, 3],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#               [2, 8, 6, 12, 10, 4, 15, 13, 5, 3],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#               [2, 8, 6, 12, 10, 14, 19, 4, 3],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#           ],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#           [</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#               [2, 7, 18, 11, 9, 5, 3],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#               [2, 17, 11, 9, 4, 3],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#           ]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#       ],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#       &#39;str&#39;: [</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#           [</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#               &#39;How are you?&#39;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#               &quot;I&#39;m fine. And you?&quot;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#               &quot;I&#39;m fine, too.&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#           ],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#           [</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#               &#39;How to install cotk?&#39;,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#               &#39;pip install cotk.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#           ]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   }</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;session&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="go">{</span>
<span class="go">    &#39;session_turn_length&#39;: numpy.array([3, 2]),</span>
<span class="go">    &#39;session_sent_length&#39;: [</span>
<span class="go">        [6, 10, 9],</span>
<span class="go">        [7, 6]</span>
<span class="go">    ],</span>
<span class="go">    &#39;session&#39;: numpy.array([</span>
<span class="go">        [</span>
<span class="go">            [ 2,  7,  1, 13,  5,  3,  0,  0,  0,  0], # &lt;go&gt; How &lt;unk&gt; you? &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">            [ 2,  8,  6, 12, 10,  4,  1, 13,  5,  3], # &lt;go&gt; I&#39;m fine. &lt;unk&gt; you? &lt;eos&gt;</span>
<span class="go">            [ 2,  8,  6, 12, 10,  1,  1,  4,  3,  0]  # &lt;go&gt; I&#39;m fine &lt;unk&gt; &lt;unk&gt;. &lt;eos&gt; &lt;pad&gt;</span>
<span class="go">        ],</span>
<span class="go">        [</span>
<span class="go">            [ 2,  7,  1, 11,  9,  5,  3,  0,  0,  0], # &lt;go&gt; How &lt;unk&gt; install cotk? &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">            [ 2,  1, 11,  9,  4,  3,  0,  0,  0,  0], # &lt;go&gt; &lt;unk&gt; install cotk. &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">            [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0]  # all &lt;pad&gt;</span>
<span class="go">        ]</span>
<span class="go">    ]),</span>
<span class="go">    &#39;session_allvocabs&#39;: numpy.array([</span>
<span class="go">        [</span>
<span class="go">            [ 2,  7, 16, 13,  5,  3,  0,  0,  0,  0], # &lt;go&gt; How are you? &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">            [ 2,  8,  6, 12, 10,  4, 15, 13,  5,  3], # &lt;go&gt; I&#39;m fine. And you? &lt;eos&gt;</span>
<span class="go">            [ 2,  8,  6, 12, 10, 14, 19,  4,  3,  0]  # &lt;go&gt; I&#39;m fine, too. &lt;eos&gt; &lt;pad&gt;</span>
<span class="go">        ],</span>
<span class="go">        [</span>
<span class="go">            [ 2,  7, 18, 11,  9,  5,  3,  0,  0,  0], # &lt;go&gt; How to install cotk? &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">            [ 2, 17, 11,  9,  4,  3,  0,  0,  0,  0], # &lt;go&gt; pip install cotk. &lt;eos&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt; &lt;pad&gt;</span>
<span class="go">            [ 0,  0,  0,  0,  0,  0,  0,  0,  0,  0]  # all &lt;pad&gt;</span>
<span class="go">        ]</span>
<span class="go">    ]),</span>
<span class="go">    &#39;session_str&#39;: [</span>
<span class="go">        [</span>
<span class="go">            &#39;How are you?&#39;,</span>
<span class="go">            &quot;I&#39;m fine. And you?&quot;,</span>
<span class="go">            &quot;I&#39;m fine, too.&quot;</span>
<span class="go">        ],</span>
<span class="go">        [</span>
<span class="go">            &#39;How to install cotk?&#39;,</span>
<span class="go">            &#39;pip install cotk.&#39;</span>
<span class="go">        ]</span>
<span class="go">    ]</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sessiongpt2">
<h4>SessionGPT2<a class="headerlink" href="#sessiongpt2" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="cotk.dataloader.SessionGPT2">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SessionGPT2</code><span class="sig-paren">(</span><em class="sig-param">tokenizer=None</em>, <em class="sig-param">vocab=None</em>, <em class="sig-param">vocab_from_mappings=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em>, <em class="sig-param">max_turn_length=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#SessionGPT2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SessionGPT2" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Session" title="cotk.dataloader.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Session</span></code></a>, <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Field</span></code></a></p>
<p>A field for session in the format of GPT2.</p>
<p>If any argument is not specified,
the value will be first retrieved from <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a>. If still <code class="docutils literal notranslate"><span class="pre">None</span></code>, default
value will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>, optional) – The vocabulary used for this field. Sharing this object between fields can
build vocabulary together.  No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab_from_mappings</strong> (<em>Dict[str, str], optional</em>) – Infer the set type (train, test, or extra) from the set name.
For example, <code class="docutils literal notranslate"><span class="pre">DEFAULT_VOCAB_FROM_MAPPINGS[&quot;dev&quot;]</span> <span class="pre">==</span> <span class="pre">&quot;test&quot;</span></code> means that the words from the “dev” set
is used for test. Default: See <a class="reference internal" href="#vocab-from-ref"><span class="std std-ref">the table</span></a> for default value.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Input Format</dt><dd><p>This field read multiple line of sentences per sample, until a blank line.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.SessionGPT2.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">data</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/field.html#SessionGPT2.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SessionGPT2.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Invoked by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a>, return the batched data specified by this field.</dt><dd><p>This function is for INTERNAL USE only, but it shows the data format of the returned batch.</p>
<dl class="simple">
<dt>Arguments:</dt><dd><p>name (str): name of the field.
data (Any): the data stored in dataloader.
indexes (List[int]): the indexes of the data in this batch</p>
</dd>
</dl>
</dd>
</dl>
<p># NOTE: We only show the structure of return value of get_batch. The real value of each entry may depends on the loaded vocab.
.. rubric:: Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">transformers.tokenization_gpt2</span> <span class="kn">import</span> <span class="n">GPT2Tokenizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cotk.dataloader.tokenizer</span> <span class="kn">import</span> <span class="n">PretrainedTokenizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tokenizer</span> <span class="o">=</span> <span class="n">GPT2Tokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;gpt2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="n">SessionGPT2</span><span class="p">(</span><span class="n">PretrainedTokenizer</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field_content</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">_create</span><span class="p">(</span><span class="s1">&#39;train&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">([</span><span class="s1">&#39;How are you?</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s2">&quot;I&#39;m fine. Thank you! And you?</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;I&#39;m fine, too.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;How to install CoTk?</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;pip install cotk.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">field_content</span><span class="o">.</span><span class="n">read_next</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">break</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field_content</span><span class="o">.</span><span class="n">process_before_vocab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">vocab</span><span class="o">.</span><span class="n">build_vocab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">field_content</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">{&#39;id&#39;: [[[2, 8, 18, 6, 5, 3],</span>
<span class="go">        [2, 9, 7, 12, 10, 4, 17, 6, 13, 15, 6, 5, 3],</span>
<span class="go">        [2, 9, 7, 12, 10, 14, 22, 4, 3]],</span>
<span class="go">       [[2, 8, 21, 11, 16, 5, 3], [2, 20, 11, 19, 4, 3]]],</span>
<span class="go">  &#39;str&#39;: [[&#39;How are you?&#39;, &quot;I&#39;m fine. Thank you! And you?&quot;, &quot;I&#39;m fine, too.&quot;],</span>
<span class="go">      [&#39;How to install CoTk?&#39;, &#39;pip install cotk.&#39;]]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">batch_data</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;session&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">batch_data</span>
<span class="go">{&#39;session_turn_length&#39;: array([2]),</span>
<span class="go">  &#39;session_sent_length&#39;: [[7, 6]],</span>
<span class="go">  &#39;session&#39;: array([[[ 2,  8, 21, 11, 16,  5,  3],</span>
<span class="go">                 [ 2, 20, 11, 19,  4,  3,  0]]]),</span>
<span class="go">  &#39;session_allvocabs&#39;: array([[[ 2,  8, 21, 11, 16,  5,  3],</span>
<span class="go">                 [ 2, 20, 11, 19,  4,  3,  0]]]),</span>
<span class="go">  &#39;session_str&#39;: [[&#39;How to install CoTk?&#39;, &#39;pip install cotk.&#39;]]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &#39;session_turn_length&#39; (`name` + &#39;_turn_length&#39;) is a :class:`np.ndarray` object with shape == (batch size, ). Each element is the length of corresponding sssion.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &#39;session_sent_length&#39; (`name` + &#39;_sent_length&#39;) is List[List[int]]. Each integer is the length of corresponding sentence.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &#39;session&#39; (`name`) is a :class:`np.ndarray` object with shape == (batch size, max turn length, max sentence length).</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="c1"># batch_data[&#39;session&#39;][i, j] is a sentence. batch_data[&#39;session&#39;][i, j, k] is an id.</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="c1"># If `self.max_turn_length` is not None and j &gt;= `self.max_turn_length` or `self.max_sent_length` is not None and k &gt;= `self.max_sent_length`,</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="c1"># batch_data[&#39;session&#39;][i, j, k] is `self.eos_id`.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &#39;session_allvocabs&#39; (`name` + &#39;_allvocabs&#39;) is the same with &#39;session&#39;.</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sessionbert">
<h4>SessionBERT<a class="headerlink" href="#sessionbert" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="cotk.dataloader.SessionBERT">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SessionBERT</code><span class="sig-paren">(</span><em class="sig-param">tokenizer=None</em>, <em class="sig-param">vocab=None</em>, <em class="sig-param">vocab_from_mappings=None</em>, <em class="sig-param">max_sent_length=None</em>, <em class="sig-param">convert_to_lower_letter=None</em>, <em class="sig-param">max_turn_length=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#SessionBERT"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SessionBERT" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Session" title="cotk.dataloader.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Session</span></code></a>, <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Field</span></code></a></p>
<p>A field for session in the format of BERT.</p>
<p>If any argument is not specified,
the value will be first retrieved from <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a>. If still <code class="docutils literal notranslate"><span class="pre">None</span></code>, default
value will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> (<a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tokenizer</span></code></a>, str, optional) – How to tokenize sentence. if <code class="docutils literal notranslate"><span class="pre">str</span></code>, see <a class="reference internal" href="#tokenizer-ref"><span class="std std-ref">tokenizer</span></a> for
possible value. No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>, optional) – The vocabulary used for this field. Sharing this object between fields can
build vocabulary together.  No default value, <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> will be raised.</p></li>
<li><p><strong>vocab_from_mappings</strong> (<em>Dict[str, str], optional</em>) – Infer the set type (train, test, or extra) from the set name.
For example, <code class="docutils literal notranslate"><span class="pre">DEFAULT_VOCAB_FROM_MAPPINGS[&quot;dev&quot;]</span> <span class="pre">==</span> <span class="pre">&quot;test&quot;</span></code> means that the words from the “dev” set
is used for test. Default: See <a class="reference internal" href="#vocab-from-ref"><span class="std std-ref">the table</span></a> for default value.</p></li>
<li><p><strong>max_sent_length</strong> (<em>int, _InfiniteLength, optional</em>) – All sentences longer than <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> will be shortened
to first <code class="docutils literal notranslate"><span class="pre">max_sent_length</span></code> tokens. If it’s <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">Sentence.INFINITE_LENGTH</span></code>, sentences won’t be
shortened no matter how long they are. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>convert_to_lower_letter</strong> (<em>bool, optional</em>) – Whether convert all the tokens to lower case after tokenization. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Input Format</dt><dd><p>This field read multiple line of sentences per sample, until a blank line.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.SessionBERT.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">data</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/field.html#SessionBERT.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SessionBERT.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Invoked by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a>, return the batched data specified by this field.</dt><dd><p>This function is for INTERNAL USE only, but it shows the data format of the returned batch.</p>
<dl class="simple">
<dt>Arguments:</dt><dd><p>name (str): name of the field.
data (Any): the data stored in dataloader.
indexes (List[int]): the indexes of the data in this batch</p>
</dd>
</dl>
</dd>
</dl>
<p># NOTE: We only show the structure of return value of get_batch. The real value of each entry may depends on the loaded vocab.
.. rubric:: Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">transformers.tokenization_bert</span> <span class="kn">import</span> <span class="n">BertTokenizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cotk.dataloader.tokenizer</span> <span class="kn">import</span> <span class="n">PretrainedTokenizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tokenizer</span> <span class="o">=</span> <span class="n">BertTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s1">&#39;bert&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span> <span class="o">=</span> <span class="n">SessionBERT</span><span class="p">(</span><span class="n">PretrainedTokenizer</span><span class="p">(</span><span class="n">tokenizer</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field_content</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">_create</span><span class="p">(</span><span class="s1">&#39;train&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">([</span><span class="s1">&#39;How are you?</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s2">&quot;I&#39;m fine. Thank you! And you?</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;I&#39;m fine, too.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;How to install CoTk?</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;pip install cotk.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">field_content</span><span class="o">.</span><span class="n">read_next</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">break</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field_content</span><span class="o">.</span><span class="n">process_before_vocab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">vocab</span><span class="o">.</span><span class="n">build_vocab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">field_content</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span>
<span class="go">{&#39;id&#39;: [[[2, 8, 18, 6, 5, 3],</span>
<span class="go">        [2, 9, 7, 12, 10, 4, 17, 6, 13, 15, 6, 5, 3],</span>
<span class="go">        [2, 9, 7, 12, 10, 14, 22, 4, 3]],</span>
<span class="go">       [[2, 8, 21, 11, 16, 5, 3], [2, 20, 11, 19, 4, 3]]],</span>
<span class="go">  &#39;str&#39;: [[&#39;How are you?&#39;, &quot;I&#39;m fine. Thank you! And you?&quot;, &quot;I&#39;m fine, too.&quot;],</span>
<span class="go">      [&#39;How to install CoTk?&#39;, &#39;pip install cotk.&#39;]]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">batch_data</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;session&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">batch_data</span>
<span class="go">{&#39;session_turn_length&#39;: array([2]),</span>
<span class="go">  &#39;session_sent_length&#39;: [[7, 6]],</span>
<span class="go">  &#39;session&#39;: array([[[ 2,  8, 21, 11, 16,  5,  3],</span>
<span class="go">                 [ 2, 20, 11, 19,  4,  3,  0]]]),</span>
<span class="go">  &#39;session_allvocabs&#39;: array([[[ 2,  8, 21, 11, 16,  5,  3],</span>
<span class="go">                 [ 2, 20, 11, 19,  4,  3,  0]]]),</span>
<span class="go">  &#39;session_str&#39;: [[&#39;How to install CoTk?&#39;, &#39;pip install cotk.&#39;]]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &#39;session_turn_length&#39; (`name` + &#39;_turn_length&#39;) is a :class:`np.ndarray` object with shape == (batch size, ). Each element is the length of corresponding sssion.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &#39;session_sent_length&#39; (`name` + &#39;_sent_length&#39;) is List[List[int]]. Each integer is the length of corresponding sentence.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &#39;session&#39; (`name`) is a :class:`np.ndarray` object with shape == (batch size, max turn length, max sentence length).</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="c1"># batch_data[&#39;session&#39;][i, j] is a sentence. batch_data[&#39;session&#39;][i, j, k] is an id.</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="c1"># If `self.max_turn_length` is not None and j &gt;= `self.max_turn_length` or `self.max_sent_length` is not None and k &gt;= `self.max_sent_length`,</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="c1"># batch_data[&#39;session&#39;][i, j, k] is `self.pad_id`.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &#39;session_allvocabs&#39; (`name` + &#39;_allvocabs&#39;) is the same with &#39;session&#39;.</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="denselabel">
<h3>DenseLabel<a class="headerlink" href="#denselabel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.DenseLabel">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">DenseLabel</code><a class="reference internal" href="_modules/cotk/dataloader/field.html#DenseLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.DenseLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Field</span></code></a></p>
<p>A field of categorical labels whose values are integer which
ranges from <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">label_types</span> <span class="pre">-</span> <span class="pre">1</span></code>.</p>
<p>See <a class="reference internal" href="#cotk.dataloader.SparseLabel" title="cotk.dataloader.SparseLabel"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.SparseLabel</span></code></a> for labels in <code class="docutils literal notranslate"><span class="pre">str</span></code> or sparse integer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>This class do not contains arguments for initialization.</strong></p>
</dd>
</dl>
<dl class="simple">
<dt>Input Format</dt><dd><p>This field reads one line per sample. The line must be an integer.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.DenseLabel.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">data</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/field.html#DenseLabel.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.DenseLabel.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoked by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a>, return the batched data specified by this field.
This function is for INTERNAL USE only, but it shows the data format of the returned batch.</p>
<p>The function will return a dict, containing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size]</span></code>):
Labels of corresponding batched data.</p></li>
</ul>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> is the name of the field.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the field.</p></li>
<li><p><strong>data</strong> (<em>Any</em>) – the data stored in dataloader.</p></li>
<li><p><strong>indexes</strong> (<em>List[int]</em>) – the indexes of the data in this batch</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#   data = {&#39;label&#39;: [1, 0]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="go">{</span>
<span class="go">    &#39;label&#39;: numpy.array([1, 0])</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sparselabel">
<h3>SparseLabel<a class="headerlink" href="#sparselabel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.SparseLabel">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SparseLabel</code><span class="sig-paren">(</span><em class="sig-param">vocab=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/field.html#SparseLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SparseLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Field</span></code></a></p>
<p>A field of categorical labels whose values are strings or sparse integer.</p>
<p>See <a class="reference internal" href="#cotk.dataloader.DenseLabel" title="cotk.dataloader.DenseLabel"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.DenseLabel</span></code></a> for labels in dense integers.</p>
<p>If any argument is not specified,
the value will be first retrieved from <a class="reference internal" href="#cotk.dataloader.FieldContext" title="cotk.dataloader.FieldContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldContext</span></code></a>. If still <code class="docutils literal notranslate"><span class="pre">None</span></code>, default
value will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.SimpleVocab" title="cotk.dataloader.SimpleVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleVocab</span></code></a>, optional) – The vocab to store all the labels.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, a <a class="reference internal" href="#cotk.dataloader.SimpleVocab" title="cotk.dataloader.SimpleVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleVocab</span></code></a> is automatically created.</p>
</dd>
</dl>
<dl class="simple">
<dt>Input Format</dt><dd><p>This field reads one line per sample. The line can be an arbitary string.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.SparseLabel.get_batch">
<code class="sig-name descname">get_batch</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">data</em>, <em class="sig-param">indexes</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/cotk/dataloader/field.html#SparseLabel.get_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SparseLabel.get_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoked by <a class="reference internal" href="#cotk.dataloader.LanguageProcessing.get_batch" title="cotk.dataloader.LanguageProcessing.get_batch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LanguageProcessing.get_batch()</span></code></a>, return the batched data specified by this field.
This function is for INTERNAL USE only, but it shows the data format of the returned batch.</p>
<p>The function will return a dict, containing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_id</span></code> (<code class="docutils literal notranslate"><span class="pre">np.ndarray[batch_size]</span></code>):
Ids of corresponding labels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME_str</span></code> (<code class="docutils literal notranslate"><span class="pre">List[str]</span></code>):
Raw labels of the batched data.</p></li>
</ul>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDNAME</span></code> is the name of the field.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the field.</p></li>
<li><p><strong>data</strong> (<em>Dict[str, Any]</em>) – the object returned by <code class="xref py py-meth docutils literal notranslate"><span class="pre">_SparseLabelContent.get_data()</span></code>.</p></li>
</ul>
</dd>
</dl>
<p>data[‘str’] is raw labels.
data[‘id’] is ids of labels.</p>
<blockquote>
<div><p>indexes (List[int]): the indexes of the data in this batch</p>
</div></blockquote>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#   data = {</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#       &#39;id&#39;: [0, 2, 1, 0],</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#       &#39;str&#39;: [&#39;Java&#39;, &#39;Python&#39;, &#39;Cpp&#39;, &#39;Java&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#   }</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">field</span><span class="o">.</span><span class="n">get_batch</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="go">{</span>
<span class="go">    &#39;label_id&#39;: numpy.array([0, 2]),  # Ids of corresponding labels.</span>
<span class="go">    &#39;label_str&#39;: [&#39;Java&#39;, &#39;Python&#39;]   # Raw labels.</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="id3">
<h2>Tokenizer<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cotk.dataloader.Tokenizer">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">Tokenizer</code><a class="reference internal" href="_modules/cotk/dataloader/tokenizer.html#Tokenizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Tokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenizer is used for spliting sentence to tokens.
This is an abstract base class.
It often works as a part of <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a></p>
<dl class="method">
<dt id="cotk.dataloader.Tokenizer.tokenize">
<code class="sig-name descname">tokenize</code><span class="sig-paren">(</span><em class="sig-param">sentence</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="reference internal" href="_modules/cotk/dataloader/tokenizer.html#Tokenizer.tokenize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Tokenizer.tokenize" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize a sentence to a list of tokens.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sentence</strong> (<em>str</em>) – a sentence to tokenize.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Tokenizer.tokenize_sentences">
<code class="sig-name descname">tokenize_sentences</code><span class="sig-paren">(</span><em class="sig-param">sentences</em><span class="sig-paren">)</span> &#x2192; List[List[str]]<a class="reference internal" href="_modules/cotk/dataloader/tokenizer.html#Tokenizer.tokenize_sentences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Tokenizer.tokenize_sentences" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize a list of sentences to a list of lists of tokens.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sentences</strong> (<em>List[str]</em>) – sentences to tokenize.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Tokenizer.tokenize_sessions">
<code class="sig-name descname">tokenize_sessions</code><span class="sig-paren">(</span><em class="sig-param">sessions</em><span class="sig-paren">)</span> &#x2192; List[List[List[str]]]<a class="reference internal" href="_modules/cotk/dataloader/tokenizer.html#Tokenizer.tokenize_sessions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Tokenizer.tokenize_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Tokenize sessions to a 3-d list of tokens.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sessions</strong> (<em>List[List[str]]</em>) – sessions to tokenize.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Tokenizer.convert_tokens_to_sentence">
<code class="sig-name descname">convert_tokens_to_sentence</code><span class="sig-paren">(</span><em class="sig-param">tokens</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/tokenizer.html#Tokenizer.convert_tokens_to_sentence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Tokenizer.convert_tokens_to_sentence" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert tokens to sentence.
It usually works like the reverse operation of <a class="reference internal" href="#cotk.dataloader.Tokenizer.tokenize" title="cotk.dataloader.Tokenizer.tokenize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tokenize()</span></code></a>, but it is not gauranteed.
It may like <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;.join(tokens)</span></code>, but some special condition and tokens will be took care.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tokens</strong> (<em>List[str]</em>) – tokenized sentence</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Tokenizer.get_setting_hash">
<code class="sig-name descname">get_setting_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/tokenizer.html#Tokenizer.get_setting_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Tokenizer.get_setting_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the setting hash of this tokenizer instance.
See <a class="reference internal" href="#dataloader-hash-ref"><span class="std std-ref">here</span></a> for the explaination of <code class="docutils literal notranslate"><span class="pre">setting</span> <span class="pre">hash</span></code>.</p>
</dd></dl>

</dd></dl>

<div class="section" id="simpletokenizer">
<h3>SimpleTokenizer<a class="headerlink" href="#simpletokenizer" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.SimpleTokenizer">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SimpleTokenizer</code><span class="sig-paren">(</span><em class="sig-param">method</em>, <em class="sig-param">special_tokens=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/tokenizer.html#SimpleTokenizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SimpleTokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Tokenizer</span></code></a></p>
<p>A simple tokenizer. <code class="docutils literal notranslate"><span class="pre">method</span></code> can either be <code class="docutils literal notranslate"><span class="pre">nltk</span></code> or <code class="docutils literal notranslate"><span class="pre">space</span></code>.
If <code class="docutils literal notranslate"><span class="pre">nltk</span></code>, use <code class="docutils literal notranslate"><span class="pre">WordPunctTokenizer</span></code> from <code class="docutils literal notranslate"><span class="pre">nltk.tokenize</span></code>.
If <code class="docutils literal notranslate"><span class="pre">space</span></code>, use <code class="docutils literal notranslate"><span class="pre">str.split(&quot;</span> <span class="pre">&quot;)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>str</em>) – the tokenization method, <code class="docutils literal notranslate"><span class="pre">nltk</span></code> or <code class="docutils literal notranslate"><span class="pre">space</span></code>.</p></li>
<li><p><strong>special_tokens</strong> (<em>List[str]</em>) – special tokens not to tokenize, such as <code class="docutils literal notranslate"><span class="pre">&lt;go&gt;</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pretrainedtokenizer">
<h3>Pretrainedtokenizer<a class="headerlink" href="#pretrainedtokenizer" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.PretrainedTokenizer">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">PretrainedTokenizer</code><span class="sig-paren">(</span><em class="sig-param">tokenizer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/tokenizer.html#PretrainedTokenizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.PretrainedTokenizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Tokenizer" title="cotk.dataloader.Tokenizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Tokenizer</span></code></a></p>
<p>A wrapper for <code class="docutils literal notranslate"><span class="pre">Pretrainedtokenizer</span></code> from <code class="docutils literal notranslate"><span class="pre">transformers</span></code> package.
If you don’t want to do tokenization on some special tokens, see
<code class="docutils literal notranslate"><span class="pre">transformers.Pretrainedtokenizer.add_special_tokens</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tokenizer</strong> (<em>transformers.Pretrainedtokenizer</em>) – An
instance of <code class="docutils literal notranslate"><span class="pre">transformers.Pretrainedtokenizer</span></code>.</p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.PretrainedTokenizer.get_tokenizer_class">
<code class="sig-name descname">get_tokenizer_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/tokenizer.html#PretrainedTokenizer.get_tokenizer_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.PretrainedTokenizer.get_tokenizer_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the class name of pretrained tokenizer.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="vocab">
<h2>Vocab<a class="headerlink" href="#vocab" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cotk.dataloader.Vocab">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">Vocab</code><a class="reference internal" href="_modules/cotk/dataloader/vocab.html#Vocab"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Vocab" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for storing vocabulary.
This is an abstract base class.
It often works as a part of <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> or is shared between <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a>.</p>
<p>See <a class="reference internal" href="#vocabulary-ref"><span class="std std-ref">introduction of vocabulary</span></a> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>This class do not contains arguments for initialization.</strong></p>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.Vocab.get_all_subclasses">
<em class="property">classmethod </em><code class="sig-name descname">get_all_subclasses</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Iterable[Any]<a class="headerlink" href="#cotk.dataloader.Vocab.get_all_subclasses" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator of all subclasses.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Vocab.load_class">
<em class="property">classmethod </em><code class="sig-name descname">load_class</code><span class="sig-paren">(</span><em class="sig-param">class_name</em><span class="sig-paren">)</span> &#x2192; Any<a class="headerlink" href="#cotk.dataloader.Vocab.load_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a subclass of <code class="docutils literal notranslate"><span class="pre">class_name</span></code>, case insensitively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>class_name</strong> (<em>str</em>) – target class name.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Vocab.add_tokens">
<code class="sig-name descname">add_tokens</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">vocab_from</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#Vocab.add_tokens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Vocab.add_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Add tokens for this vocabulary instance, the tokens will be used for building
vocabulary list. Must be called before <a class="reference internal" href="#cotk.dataloader.Vocab.build_vocab" title="cotk.dataloader.Vocab.build_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_vocab()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokens</strong> (<em>List[str]</em>) – A list of tokens to add to the vocabulary.</p></li>
<li><p><strong>vocab_from</strong> (<em>str</em>) – One of <code class="docutils literal notranslate"><span class="pre">train</span></code>, <code class="docutils literal notranslate"><span class="pre">test</span></code>, <code class="docutils literal notranslate"><span class="pre">extra</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">train</span></code>: The tokens are from the training data. Frequent vocabs are selected from tokens of this type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code>: The tokens are from the validation data or test data. Rare vocabs are selected from tokens of this type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extra</span></code>: The tokens are from extra data. The tokens of this type will not selected as frequent or rare vocabs.</p></li>
</ul>
</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Vocab.build_vocab">
<code class="sig-name descname">build_vocab</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/vocab.html#Vocab.build_vocab"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Vocab.build_vocab" title="Permalink to this definition">¶</a></dt>
<dd><p>Building the vocabulary list according to the tokens from <a class="reference internal" href="#cotk.dataloader.Vocab.add_tokens" title="cotk.dataloader.Vocab.add_tokens"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_tokens()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Vocab.convert_tokens_to_ids">
<code class="sig-name descname">convert_tokens_to_ids</code><span class="sig-paren">(</span><em class="sig-param">tokens</em>, <em class="sig-param">only_frequent_word=False</em><span class="sig-paren">)</span> &#x2192; List[int]<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#Vocab.convert_tokens_to_ids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Vocab.convert_tokens_to_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of tokens to list of ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokens</strong> (<em>List[str]</em>) – List of tokens.</p></li>
<li><p><strong>only_frequent_word</strong> (<em>bool, optional</em>) – Use <code class="docutils literal notranslate"><span class="pre">unk</span></code> for rare tokens. Defaults: False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Vocab.convert_ids_to_tokens">
<code class="sig-name descname">convert_ids_to_tokens</code><span class="sig-paren">(</span><em class="sig-param">ids</em><span class="sig-paren">)</span> &#x2192; List[str]<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#Vocab.convert_ids_to_tokens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Vocab.convert_ids_to_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of ids to list of tokens.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ids</strong> (<em>List[int]</em>) – List of ids.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Vocab.frequent_vocab_size">
<code class="sig-name descname">frequent_vocab_size</code><a class="headerlink" href="#cotk.dataloader.Vocab.frequent_vocab_size" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The number of <strong>frequent</strong> words.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Vocab.all_vocab_size">
<code class="sig-name descname">all_vocab_size</code><a class="headerlink" href="#cotk.dataloader.Vocab.all_vocab_size" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The number of frequent words and rare words.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Vocab.frequent_vocab_list">
<code class="sig-name descname">frequent_vocab_list</code><a class="headerlink" href="#cotk.dataloader.Vocab.frequent_vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – The list of frequent words.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Vocab.all_vocab_list">
<code class="sig-name descname">all_vocab_list</code><a class="headerlink" href="#cotk.dataloader.Vocab.all_vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – The list of frequent words and rare words. Frequent words are always in the front of the list.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Vocab.get_special_tokens_mapping">
<code class="sig-name descname">get_special_tokens_mapping</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; MutableMapping[str, str]<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#Vocab.get_special_tokens_mapping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Vocab.get_special_tokens_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Get special tokens mapping. Special tokens mapping is an ordered dict       mapping the general name of special tokens to its string.       The key must be one of the following:       <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.      The value can be arbitrary string, e.g., <code class="docutils literal notranslate"><span class="pre">&quot;&lt;pad&gt;&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;&lt;unk&gt;&quot;</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Vocab.get_special_tokens_id">
<code class="sig-name descname">get_special_tokens_id</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span> &#x2192; int<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#Vocab.get_special_tokens_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Vocab.get_special_tokens_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get id of special token specifying the general name.
Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no such token in this instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – the general name, must be one of the following,
<code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Vocab.pad_id">
<code class="sig-name descname">pad_id</code><a class="headerlink" href="#cotk.dataloader.Vocab.pad_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of pad token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no pad token in this instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Vocab.unk_id">
<code class="sig-name descname">unk_id</code><a class="headerlink" href="#cotk.dataloader.Vocab.unk_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of unk token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no unk token in this instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Vocab.go_id">
<code class="sig-name descname">go_id</code><a class="headerlink" href="#cotk.dataloader.Vocab.go_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of go token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no go token in this instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.Vocab.eos_id">
<code class="sig-name descname">eos_id</code><a class="headerlink" href="#cotk.dataloader.Vocab.eos_id" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – The id of eos token. Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if no eos token in this instance.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Vocab.get_setting_hash">
<code class="sig-name descname">get_setting_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#Vocab.get_setting_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Vocab.get_setting_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get setting hash for the Vocabulary instance.
See <a class="reference internal" href="#dataloader-hash-ref"><span class="std std-ref">here</span></a> for the explaination of <code class="docutils literal notranslate"><span class="pre">setting</span> <span class="pre">hash</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Vocab.get_vocab_hash">
<code class="sig-name descname">get_vocab_hash</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#Vocab.get_vocab_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Vocab.get_vocab_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get vocab hash for the Vocabulary instance.
See <a class="reference internal" href="#dataloader-hash-ref"><span class="std std-ref">here</span></a> for the explaination of <code class="docutils literal notranslate"><span class="pre">vocab</span> <span class="pre">hash</span></code>.</p>
</dd></dl>

</dd></dl>

<div class="section" id="generalvocab">
<h3>GeneralVocab<a class="headerlink" href="#generalvocab" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.GeneralVocab">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">GeneralVocab</code><span class="sig-paren">(</span><em class="sig-param">min_frequent_vocab_times=None</em>, <em class="sig-param">min_rare_vocab_times=None</em>, <em class="sig-param">special_tokens_mapping=None</em>, <em class="sig-param">special_appeared_in_data=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/vocab.html#GeneralVocab"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.GeneralVocab" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Vocab</span></code></a></p>
<p>A vocabulary class for general use.</p>
<p>This class always have the following 4 speical tokens: <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>.</p>
<p>If any argument is not specified,
the value will be first retrieved from <a class="reference internal" href="#cotk.dataloader.VocabContext" title="cotk.dataloader.VocabContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">VocabContext</span></code></a>. If still <code class="docutils literal notranslate"><span class="pre">None</span></code>, default
value will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_frequent_vocab_times</strong> (<em>int, optional</em>) – Tokens from training data appeared
no less than <code class="docutils literal notranslate"><span class="pre">min_frequent_vocab_times</span></code> will be regarded as frequent words. Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>min_rare_vocab_times</strong> (<em>int, optional</em>) – Tokens from training data or test data
appeared more than <code class="docutils literal notranslate"><span class="pre">min_rare_vocab_times</span></code> will be regarded as rare words
(frequent word excluded).  Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p><strong>special_tokens_mapping</strong> (<em>OrderedDict, optional</em>) – Special tokens mapping is an ordered dict       mapping the general name of special tokens to its string.       The key must be one of the following:       <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.      The value can be arbitrary string, e.g., <code class="docutils literal notranslate"><span class="pre">&quot;&lt;pad&gt;&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;&lt;unk&gt;&quot;</span></code>.
It must at least contains <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>.
All the value of special tokens cannot be the same. Default: If <code class="docutils literal notranslate"><span class="pre">None</span></code>, it will be <code class="docutils literal notranslate"><span class="pre">OrderedDict([(&quot;pad&quot;,</span> <span class="pre">&quot;&lt;pad&gt;&quot;),</span> <span class="pre">(&quot;unk&quot;,</span> <span class="pre">&quot;&lt;unk&gt;&quot;),</span> <span class="pre">(&quot;go&quot;,</span> <span class="pre">&quot;&lt;go&gt;&quot;),</span> <span class="pre">(&quot;eos&quot;,</span> <span class="pre">&quot;&lt;eos&gt;&quot;)]</span></code>.</p></li>
<li><p><strong>special_appeared_in_data</strong> (<em>bool, optional</em>) – If the string of special tokens will
appear in the data. Default: If not specified, it will be <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.GeneralVocab.from_predefined">
<em class="property">static </em><code class="sig-name descname">from_predefined</code><span class="sig-paren">(</span><em class="sig-param">vocab_list</em>, <em class="sig-param">frequent_vocab_size</em>, <em class="sig-param">special_tokens_mapping=None</em><span class="sig-paren">)</span> &#x2192; cotk.dataloader.vocab.GeneralVocab<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#GeneralVocab.from_predefined"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.GeneralVocab.from_predefined" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a> instance, whose vocabulary comes from a predefined list. See <a class="reference internal" href="#cotk.dataloader.GeneralVocab.from_predefined_vocab" title="cotk.dataloader.GeneralVocab.from_predefined_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_predefined_vocab()</span></code></a> if
you want to use the vocabulary from an existing <a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vocab_list</strong> (<em>List[str]</em>) – A list of all vocabulary.</p></li>
<li><p><strong>frequent_vocab_size</strong> (<em>int</em>) – the length of the frequent words.
The frequent word must be in the front of the <code class="docutils literal notranslate"><span class="pre">vocab_list</span></code>.</p></li>
<li><p><strong>special_tokens_mapping</strong> (<em>OrderedDict, optional</em>) – Special tokens mapping is an ordered dict       mapping the general name of special tokens to its string.       The key must be one of the following:       <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.      The value can be arbitrary string, e.g., <code class="docutils literal notranslate"><span class="pre">&quot;&lt;pad&gt;&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;&lt;unk&gt;&quot;</span></code>.
It must at least contains <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>.
All the value of special tokens cannot be the same. Special tokens MUST be in the front of the <code class="docutils literal notranslate"><span class="pre">frequent_vocab_list</span></code> (ordered sensitive).
Default: If <code class="docutils literal notranslate"><span class="pre">None</span></code>, it will be <code class="docutils literal notranslate"><span class="pre">OrderedDict([(&quot;pad&quot;,</span> <span class="pre">&quot;&lt;pad&gt;&quot;),</span> <span class="pre">(&quot;unk&quot;,</span> <span class="pre">&quot;&lt;unk&gt;&quot;),</span> <span class="pre">(&quot;go&quot;,</span> <span class="pre">&quot;&lt;go&gt;&quot;),</span> <span class="pre">(&quot;eos&quot;,</span> <span class="pre">&quot;&lt;eos&gt;&quot;)]</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.GeneralVocab.from_predefined_vocab">
<em class="property">static </em><code class="sig-name descname">from_predefined_vocab</code><span class="sig-paren">(</span><em class="sig-param">vocab</em><span class="sig-paren">)</span> &#x2192; cotk.dataloader.vocab.GeneralVocab<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#GeneralVocab.from_predefined_vocab"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.GeneralVocab.from_predefined_vocab" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a> instance from <code class="docutils literal notranslate"><span class="pre">vocab</span></code>. The new instance have the same
vocabulary list as the old one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a>) – The old instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.GeneralVocab.from_frequent_word">
<em class="property">static </em><code class="sig-name descname">from_frequent_word</code><span class="sig-paren">(</span><em class="sig-param">frequent_vocab_list</em>, <em class="sig-param">special_tokens_mapping=None</em><span class="sig-paren">)</span> &#x2192; cotk.dataloader.vocab.GeneralVocab<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#GeneralVocab.from_frequent_word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.GeneralVocab.from_frequent_word" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a> instance, whose vocabulary comes from a predefined frequent list.
And its rare word list can be built later.
See <a class="reference internal" href="#cotk.dataloader.GeneralVocab.from_frequent_word_of_vocab" title="cotk.dataloader.GeneralVocab.from_frequent_word_of_vocab"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_frequent_word_of_vocab()</span></code></a>
if you want to use the frequent vocabulary from an existing <a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frequent_vocab_list</strong> (<em>List[str]</em>) – A list of frequent vocabulary.</p></li>
<li><p><strong>special_tokens_mapping</strong> (<em>OrderedDict, optional</em>) – Special tokens mapping is an ordered dict       mapping the general name of special tokens to its string.       The key must be one of the following:       <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">cls</span></code>, <code class="docutils literal notranslate"><span class="pre">mask</span></code>.      The value can be arbitrary string, e.g., <code class="docutils literal notranslate"><span class="pre">&quot;&lt;pad&gt;&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;&lt;unk&gt;&quot;</span></code>.
It must at least contains <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>.
All the value of special tokens cannot be the same. Special tokens MUST be in the front of the <code class="docutils literal notranslate"><span class="pre">frequent_vocab_list</span></code> (ordered sensitive).
Default: If <code class="docutils literal notranslate"><span class="pre">None</span></code>, it will be <code class="docutils literal notranslate"><span class="pre">OrderedDict([(&quot;pad&quot;,</span> <span class="pre">&quot;&lt;pad&gt;&quot;),</span> <span class="pre">(&quot;unk&quot;,</span> <span class="pre">&quot;&lt;unk&gt;&quot;),</span> <span class="pre">(&quot;go&quot;,</span> <span class="pre">&quot;&lt;go&gt;&quot;),</span> <span class="pre">(&quot;eos&quot;,</span> <span class="pre">&quot;&lt;eos&gt;&quot;)]</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.GeneralVocab.from_frequent_word_of_vocab">
<em class="property">static </em><code class="sig-name descname">from_frequent_word_of_vocab</code><span class="sig-paren">(</span><em class="sig-param">vocab</em><span class="sig-paren">)</span> &#x2192; cotk.dataloader.vocab.GeneralVocab<a class="reference internal" href="_modules/cotk/dataloader/vocab.html#GeneralVocab.from_frequent_word_of_vocab"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.GeneralVocab.from_frequent_word_of_vocab" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a> instance, which has the same frequent vocabulary list as the old one.
The rare word list can be built later.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vocab</strong> (<a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a>) – The old instance to provide frequent words.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="pretrainedvocab">
<h3>PretrainedVocab<a class="headerlink" href="#pretrainedvocab" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.PretrainedVocab">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">PretrainedVocab</code><span class="sig-paren">(</span><em class="sig-param">tokenizer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/vocab.html#PretrainedVocab"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.PretrainedVocab" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Vocab</span></code></a></p>
<p>Use the vocabulary from a pretrained tokenizer in <code class="docutils literal notranslate"><span class="pre">transformers</span></code> package.
This class is usually used for pretrained models, and it <strong>do NOT</strong> have rare words.</p>
<p>Unlike <a class="reference internal" href="#cotk.dataloader.GeneralVocab" title="cotk.dataloader.GeneralVocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralVocab</span></code></a>, this class do not always have <code class="docutils literal notranslate"><span class="pre">pad</span></code>, <code class="docutils literal notranslate"><span class="pre">unk</span></code>, <code class="docutils literal notranslate"><span class="pre">go</span></code>, <code class="docutils literal notranslate"><span class="pre">eos</span></code>.
Some special tokens may refer to the same token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tokenizer</strong> (<code class="docutils literal notranslate"><span class="pre">transformers.PretrainedTokenizer</span></code>) – A pretrained tokenizer from transformers package.</p>
</dd>
</dl>
<dl class="attribute">
<dt id="cotk.dataloader.PretrainedVocab.frequent_vocab_list">
<code class="sig-name descname">frequent_vocab_list</code><a class="headerlink" href="#cotk.dataloader.PretrainedVocab.frequent_vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – The list of frequent words.</p>
</dd></dl>

<dl class="attribute">
<dt id="cotk.dataloader.PretrainedVocab.all_vocab_list">
<code class="sig-name descname">all_vocab_list</code><a class="headerlink" href="#cotk.dataloader.PretrainedVocab.all_vocab_list" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – The list of frequent words and rare words. Frequent words are always in the front of the list.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="simplevocab">
<h3>SimpleVocab<a class="headerlink" href="#simplevocab" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.SimpleVocab">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">SimpleVocab</code><a class="reference internal" href="_modules/cotk/dataloader/vocab.html#SimpleVocab"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.SimpleVocab" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Vocab</span></code></a></p>
<p>A very simple vocabulary class. No rare vocabs or special tokens.
Used by <a class="reference internal" href="#cotk.dataloader.SparseLabel" title="cotk.dataloader.SparseLabel"><code class="xref py py-class docutils literal notranslate"><span class="pre">SparseLabel</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>This class do not contains arguments for initialization.</strong></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="id4">
<h2>Context<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cotk.dataloader.Context">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">Context</code><span class="sig-paren">(</span><em class="sig-param">parameter_dict</em>, <em class="sig-param">weak=False</em>, <em class="sig-param">none_as_ignored=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/context.html#Context"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Context" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract base class for context manager.</p>
<p>This class is used for setting default parameters
for <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> or <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>, without directly
passing parameters to <code class="docutils literal notranslate"><span class="pre">__init__</span></code> of the object.</p>
<p>See <a class="reference internal" href="#dataloader-context-ref"><span class="std std-ref">examples</span></a> for how to use context manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parameter_dict</strong> (<em>Dict[str, Any]</em>) – Key-value dict for changed parameters.</p></li>
<li><p><strong>weak</strong> (<em>bool, optional</em>) – When <code class="docutils literal notranslate"><span class="pre">False</span></code>, overwrite existing parameters. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>none_as_ignored</strong> (<em>bool, optional</em>) – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code> values in <code class="docutils literal notranslate"><span class="pre">parameter_dict</span></code> are ignored.
Otherwise, the corresponding key will be set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="cotk.dataloader.Context.get">
<em class="property">classmethod </em><code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">key</em>, <em class="sig-param">default=None</em>, <em class="sig-param">no_default=False</em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="_modules/cotk/dataloader/context.html#Context.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Context.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of parameter named <code class="docutils literal notranslate"><span class="pre">key</span></code> stored in this class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – name of the parameter</p></li>
<li><p><strong>default</strong> (<em>Any, optional</em>) – Default value if <code class="docutils literal notranslate"><span class="pre">key</span></code> is not set. Defaults: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>no_default</strong> (<em>bool, optional</em>) – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, Raise <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if <code class="docutils literal notranslate"><span class="pre">key</span></code> is not set. Defaults: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Context.set">
<em class="property">classmethod </em><code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param">key</em>, <em class="sig-param">value</em>, <em class="sig-param">weak=False</em>, <em class="sig-param">none_as_ignored=True</em><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="_modules/cotk/dataloader/context.html#Context.set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Context.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the parameter named <code class="docutils literal notranslate"><span class="pre">key</span></code> to <code class="docutils literal notranslate"><span class="pre">value</span></code>, stored in this class.
If weak is <code class="docutils literal notranslate"><span class="pre">True</span></code>, do not overwrite if <code class="docutils literal notranslate"><span class="pre">key</span></code> is already set.
Return the old value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – The name of the changed parameter.</p></li>
<li><p><strong>value</strong> (<em>Any</em>) – The new value of changed parameter.
If want to delete the key, use <code class="docutils literal notranslate"><span class="pre">Context.UNDEFINED</span></code>.</p></li>
<li><p><strong>weak</strong> (<em>bool, optional</em>) – When <code class="docutils literal notranslate"><span class="pre">False</span></code>, overwrite existing parameters. Defaults: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>none_as_ignored</strong> (<em>bool, optional</em>) – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code> values in <code class="docutils literal notranslate"><span class="pre">parameter_dict</span></code> are ignored.
Otherwise, the corresponding value will be set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="cotk.dataloader.Context.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/context.html#Context.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.Context.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore the old parameter.</p>
</dd></dl>

</dd></dl>

<div class="section" id="fieldcontext">
<h3>FieldContext<a class="headerlink" href="#fieldcontext" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.FieldContext">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">FieldContext</code><span class="sig-paren">(</span><em class="sig-param">parameter_dict</em>, <em class="sig-param">weak=False</em>, <em class="sig-param">none_as_ignored=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/context.html#FieldContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.FieldContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Context" title="cotk.dataloader.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Context</span></code></a></p>
<p>A context class for setting default parameters for <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a>.</p>
<dl class="method">
<dt id="cotk.dataloader.FieldContext.set_parameters">
<em class="property">classmethod </em><code class="sig-name descname">set_parameters</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">weak=False</em>, <em class="sig-param">none_as_ignored=True</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span> &#x2192; cotk.dataloader.context.FieldContext<a class="reference internal" href="_modules/cotk/dataloader/context.html#FieldContext.set_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.FieldContext.set_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a context for initialization of <a class="reference internal" href="#cotk.dataloader.Field" title="cotk.dataloader.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a>.
See <a class="reference internal" href="#dataloader-context-ref"><span class="std std-ref">examples</span></a> for how to use context manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weak</strong> (<em>bool, optional</em>) – When <code class="docutils literal notranslate"><span class="pre">False</span></code>, overwrite existing parameters. Defaults: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>none_as_ignored</strong> (<em>bool, optional</em>) – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code> values in <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> are ignored.
Otherwise, the corresponding value will be set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>**kwargs</strong> – Any parameters to be set. Set <code class="docutils literal notranslate"><span class="pre">key</span></code> to <code class="docutils literal notranslate"><span class="pre">FieldContext.UNDEFINED</span></code> to delete a parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="vocabcontext">
<h3>VocabContext<a class="headerlink" href="#vocabcontext" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="cotk.dataloader.VocabContext">
<em class="property">class </em><code class="sig-prename descclassname">cotk.dataloader.</code><code class="sig-name descname">VocabContext</code><span class="sig-paren">(</span><em class="sig-param">parameter_dict</em>, <em class="sig-param">weak=False</em>, <em class="sig-param">none_as_ignored=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cotk/dataloader/context.html#VocabContext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.VocabContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cotk.dataloader.Context" title="cotk.dataloader.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataloader.Context</span></code></a></p>
<p>A context class for setting default parameters for <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>.</p>
<dl class="method">
<dt id="cotk.dataloader.VocabContext.set_parameters">
<em class="property">classmethod </em><code class="sig-name descname">set_parameters</code><span class="sig-paren">(</span><em class="sig-param">*</em>, <em class="sig-param">weak=False</em>, <em class="sig-param">none_as_ignored=True</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span> &#x2192; cotk.dataloader.context.VocabContext<a class="reference internal" href="_modules/cotk/dataloader/context.html#VocabContext.set_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cotk.dataloader.VocabContext.set_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a context for initialization of <a class="reference internal" href="#cotk.dataloader.Vocab" title="cotk.dataloader.Vocab"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vocab</span></code></a>.
See <a class="reference internal" href="#dataloader-context-ref"><span class="std std-ref">examples</span></a> for how to use context manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weak</strong> (<em>bool, optional</em>) – When <code class="docutils literal notranslate"><span class="pre">False</span></code>, overwrite existing parameters. Defaults: <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>none_as_ignored</strong> (<em>bool, optional</em>) – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code> values in <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> are ignored.
Otherwise, the corresponding value will be set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.
Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>**kwargs</strong> – Any parameters to be set. Set <code class="docutils literal notranslate"><span class="pre">key</span></code> to <code class="docutils literal notranslate"><span class="pre">VocabContext.UNDEFINED</span></code> to delete a parameter.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="wordvector.html" class="btn btn-neutral float-right" title="Word Vector" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="notes/FAQ.html" class="btn btn-neutral float-left" title="Frequently Asked Questions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, thu-coai

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>